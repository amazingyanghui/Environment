<style type="text/css">
  .indexcard{
    background-color: rgba(17, 38, 79, 1);
  }
  .indexcardheader{
    border-bottom: 0px;
    color:white;
  }
  .bigtitle{
    background-color: #0d1b2e;
    font-size: 30px;
    color: #8BF9FF;
    font-family: "微软雅黑", "Microsoft YaHei";
  }
  .airDiv{
    width: 180px;
    float: left;
    margin-top: 0px;
    margin-left: 5px;
    margin-bottom: 0px;
    height: 100px;
  }
  .airDiv img{
    float: left;
  }
  .airDiv div div{
    margin-left: 60px;
    margin-bottom: 10px;
  }
  .fixedValue{
    color: #FFF;
  }
  .changeValueColor{
    color: #FFCC00;
  }
  .changeRedValueColor{
    color: #BD4B70;
  }
  .changeGreenValueColor{
    color: #98D87D
  }
  .changeValueFontSize{
    font-size: 16px;
  }
  .labelFontSize{
    font-size: 24px;
  }
  .labelFontWeight{
    font-weight: bold;
  }
  .cominfoTitle{
    font-size: 18px;
    margin-top: 0px;
    margin-bottom: 20px;
  }

  .cominfoDiv{
    float: left;
    width: 185px;
    height: 86px;
    margin-left: 6px;
    margin-right: 6px;
    margin-bottom: 12px;
    background-image: url("../start/wholeindex/首页/u10.png");
  }
  .cominfoDiv img{
    left: 0px;
    top: 0px;
    width: 42px;
    height: 42px;
    float: left;
    margin: 20px;
  }
  .cominfoDiv div{
    margin-top: 12px;
  }
  .cominfoDivTip{
    margin-left: 30px;
  }
  .cominfoLittleTip{
    margin-left:10px;
    color: #fff;
  }

  .hbzfDiv{
    float: left;
    width: 138px;
    height: 64px;
    margin-left: 24px;
    margin-right: 22px;
    margin-bottom: 12px;
    background-image: url("../start/wholeindex/首页/u10.png");
    background-size: contain;
  }
  .hbzfDivTip{
    margin-top: 12px;
    margin-left: 40px;
  }
  .hbzfDivLabel{
    margin-left: 40px;
  }

  .monitorTitle{
    font-size: 28px;
    margin-top: 20px;
    margin-left: 20px;
    margin-bottom: 20px;

  }

  .monitorDiv{
    width: 158px;
    float: left;
    margin-top: 16px;
    margin-left: 5px;
    margin-bottom: 0px;
    height: 70px;
  }
  .monitorDiv img{
    width: 35px;
    height: 35px;
    float: left;
    margin-top: 10px;
    margin-left: 16px;
  }
  .monitorDiv div div{
    margin-left: 60px;
    margin-bottom: 10px;
  }

  .vocsMonitorDiv{
    width: 180px;
  }

  .homepageButton{
    float: right;
    right: 100px;
    width: 200px;
    height:30px;
    line-height: 30px;
    position: absolute;
    bottom: 50px;
    border: 2px #00FFFF solid;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius:6px;
    color: #00FF00;
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    background-color: #5FB878;
  }

  .homepageButton:HOVER{
    cursor: pointer;
    color: #0be5e2;
    background-color: #128637;
  }
  .airMonitor{
    width: 150px;
    height: 32px;
    border-color:#e6e6e6;
    cursor: pointer
  }
  .airMonitorTable{
    background-color: rgba(17, 38, 79, 1);
    text-align: center;
    border: 1px solid rgba(17, 38, 79, 1);
    font-size: 16px;
    color: white;
    /*height: 420px;*/
  }
  .airMonitorTable tr td{
    border: 1px solid rgba(17, 38, 79, 1);
    padding: 5px 10px;
  }
  .airMonitorTable thead{
      /*height: 35px;*/
      /*line-height: 35px;*/
  }
  .airMonitorTable tr th{
      border: 1px solid rgba(17, 38, 79, 1);
      padding: 5px 10px;
      /*height: 35px;*/
  }
</style>

<script type="text/javascript" src="layui/arithmetic.js"></script>

<div  lay-filter="layadmin-layui-fluid" style="overflow:auto;overflow-y:hidden">
  <div class="layui-row layui-col-space15" style="width: 3420px;height:1000px;background-color: #0C0C0C;overflow-y:hidden">
  <!--<div class="layui-row layui-col-space15" style="width: 3840px;height:1000px;background-color: #0C0C0C;overflow-y:hidden">-->
    <div class="layui-col-md12">
      <div class="layui-row layui-col-space15">
        <div class="layui-col-md1" style="width: 420px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle" >
                  空气质量
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:515px!important;">
                    <div class="cominfoTitle fixedValue">纳入监管的空气监测站总数：<label class="changeValueColor labelFontSize labelFontWeight" id="AirPointCount"></label> 个</div>
                    <div class="layui-col-md12">
                      <div class="layui-col-md12" style="margin-bottom: 10px">
                        <label class="fixedValue">监测站：</label>
                        <select class="airMonitor" id="airMonitor">
                          <!--<option>测试1</option>-->
                          <!--<option>测试2</option>-->
                        </select>
                      </div>
                      <div>
                        <table id="LAY-online-airMonitor" class="airMonitorTable">
                            <thead>
                                <tr>
                                    <th style="width: 60px">序号</th>
                                    <th style="width: 120px">因子名称</th>
                                    <th style="width: 120px">检测值</th>
                                    <th style="width: 100px">单位</th>
                                </tr>
                            </thead>
                        </table>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--<div class="layui-row layui-col-space15">-->
          <!--</div>-->
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader">
                  空气监测站联网断网统计
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:320px!important;">
                    <div id="airOnlineMonitorTotal" style="height:278px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="layui-col-md1" style="width: 420px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle" >
                    水质量
                </div>
                <div class="layui-card-body">
                    <div class="layui-carousel layadmin-backlog indexcard" style="height:515px!important;">
                        <div class="cominfoTitle fixedValue">纳入监管的水监测站总数：<label class="changeValueColor labelFontSize labelFontWeight" id="WaterPointCount"></label> 个</div>
                        <div class="layui-col-md12">
                            <div class="layui-col-md12" style="margin-bottom: 10px">
                                <label class="fixedValue">监测站：</label>
                                <select class="waterMonitor" id="waterMonitor">
                                    <!--<option>测试1</option>-->
                                    <!--<option>测试2</option>-->
                                </select>
                            </div>
                            <div>
                                <table id="LAY-online-waterMonitor" class="airMonitorTable">
                                    <thead>
                                        <tr>
                                            <th style="width: 60px">序号</th>
                                            <th style="width: 120px">因子名称</th>
                                            <th style="width: 120px">检测值</th>
                                            <th style="width: 100px">单位</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>

                    </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader">
                    水监测站联网断网统计
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:320px!important;">
                    <div id="waterOnlineMonitorTotal" style="height:278px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="layui-col-md1" style="width: 440px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle">
                  企业信息
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:355px!important;">
                    <div class="cominfoTitle fixedValue">纳入监管的新区污染企业总数：<label class="changeValueColor labelFontSize labelFontWeight" id="allCompanyTotal"></label> 家</div>
                    <div class="cominfoDiv">
                      <img src="../start/wholeindex/首页/u117.png">
                      <div>
                        <div class="cominfoDivTip fixedValue">重点源</div>
                        <div><label class="changeValueFontSize changeValueColor" id="key_point_source"></label><label class="cominfoLittleTip">家</label></div>
                      </div>
                    </div>
                    <div class="cominfoDiv">
                      <img src="../start/wholeindex/首页/u159.png">
                      <div>
                        <div class="cominfoDivTip fixedValue">固废产废源</div>
                        <div><label class="changeValueFontSize changeRedValueColor" id="solid_waste_source"></label><label class="cominfoLittleTip">家</label></div>
                      </div>
                    </div>
                    <div class="cominfoDiv">
                      <img src="../start/wholeindex/首页/u117.png">
                      <div>
                        <div class="cominfoDivTip fixedValue">重点排污源</div>
                        <div><label class="changeValueFontSize changeRedValueColor" id="key_blowdown_source"></label><label class="cominfoLittleTip">家</label></div>
                      </div>
                    </div>
                    <div class="cominfoDiv">
                      <img src="../start/wholeindex/首页/u117.png">
                      <div>
                        <div class="cominfoDivTip fixedValue">放射源</div>
                        <div><label class="changeValueFontSize changeGreenValueColor" id="radioactive_source"></label><label class="cominfoLittleTip">家</label></div>
                      </div>
                    </div>
                    <div class="cominfoDiv">
                      <img src="../start/wholeindex/首页/u117.png">
                      <div>
                        <div class="cominfoDivTip fixedValue">风险源</div>
                        <div><label class="changeValueFontSize changeGreenValueColor" id="risk_source"></label><label class="cominfoLittleTip">家</label></div>
                      </div>
                    </div>
                    <div class="cominfoDiv">
                      <img src="../start/wholeindex/首页/u117.png">
                      <div>
                        <div class="cominfoDivTip fixedValue">产VOCs源</div>
                        <div><label class="changeValueFontSize changeValueColor" id="voc_source"></label><label class="cominfoLittleTip">家</label></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader">
                  污染源企业类型分布
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:482px!important;">
                    <div id="wastePosition" style="height:480px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="layui-col-md4" style="width: 1000px;">
          <div class="layui-card indexcard" style="height: 975px">
            <!--<div class="layui-card-header big_title index_card_header" id="centerMapTop">-->
              <!--<div class="layui-col-md2">-->
                <!--<div class="topOldBorder"></div>-->
                <!--<label data-name="0">企业分布图</label>-->
              <!--</div>-->
              <!--<div class="layui-col-md2">-->
                <!--<div class="topOldBorder"></div>-->
                <!--<label data-name="1">水自动监控</label>-->
              <!--</div>-->
              <!--<div class="layui-col-md2">-->
                <!--<div class="topOldBorder"></div>-->
                <!--<label data-name="2">气自动监控</label>-->

              <!--</div>-->
              <!--<div class="layui-col-md2">-->
                <!--<div class="topOldBorder"></div>-->
                <!--<label data-name="3">VOCs自动监控</label>-->
              <!--</div>-->
            <!--</div>-->
            <div class="layui-card-body">
              <div class="layui-col-md12">
                <div class="layui-row layui-col-space15">
                  <div class="wrapper">
                    <div class="newmap" id="simpleMap" style="height:950px;width: 99%"></div>
                  </div>
                  <!--<div class="homepageButton">-->
                    <!--进入系统主页-->
                  <!--</div>-->
                </div>
              </div>
            </div>
          </div>
          <!--<div class="layui-row layui-col-space15">-->
            <!--<div class="layui-col-md12">-->
              <!--<div class="layui-card indexcard">-->
                <!--&lt;!&ndash;<div class="layui-card-header indexcardheader">&ndash;&gt;-->
                  <!--&lt;!&ndash;企业点位分布图&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--<div class="layui-card-body">-->
                  <!--<div class="layui-carousel layadmin-backlog indexcard" style="height:1000px!important;">-->
                    <!--<div class="wrapper">-->
                      <!--<div class="newmap" id="simpleMap" style="height:1000px;"></div>-->
                    <!--</div>-->
                    <!--<div class="homepageButton">-->
                      <!--进入系统主页-->
                    <!--</div>-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
            <!--</div>-->
          <!--</div>-->
        </div>
        <!--<div class="layui-col-md1" style="width: 420px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle">
                  环保执法监察
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:280px!important">
                    <div id="huangbaozhifajiancha" style="height:200px"></div>
                    <div class="hbzfDiv">
                      <div>
                        <div class="hbzfDivTip fixedValue">执法次数</div>
                        <div><label class="hbzfDivLabel changeValueFontSize changeValueColor">1602</label><label class="cominfoLittleTip">次</label></div>
                      </div>
                    </div>
                    <div class="hbzfDiv">
                      <div>
                        <div class="hbzfDivTip fixedValue">执法人数</div>
                        <div><label class="hbzfDivLabel changeValueFontSize changeValueColor">188</label><label class="cominfoLittleTip">人</label></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader">
                  本年度执法类型统计
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:244px!important">
                    <div id="bennianduzhifaleixing"  style="height:244px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-col-md12">
                  <div id="curYearCompareWithLastYear" style="height:298px"></div>
                </div>
              </div>
            </div>
          </div>
        </div>-->
        <div class="layui-col-md1" style="width: 380px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle">
                  水在线监控
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:260px!important">
                    <div class="monitorTitle fixedValue">水在线监控企业<label class="changeValueColor monitorTitle labelFontWeight" id="WaterBusinessCount"></label>家</div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u584.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">国控监控企业</div>
                        <div class="changeValueColor labelFontSize"> <label id="WaterBusinessUnitTypeCount"></label>家</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u590.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">非国控监控企业</div>
                        <div class="changeValueColor labelFontSize"><label id="WaterBusinessUnUnitTypeCount"></label>家</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u596.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">污水排口</div>
                        <div class="changeValueColor labelFontSize"><label id="WaterSewagePointCount"></label>个</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u602.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">雨水排口</div>
                        <div class="changeValueColor labelFontSize"><label id="WaterRainPointCount"></label>个</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-col-md12">
                  <div id="shuipaifangquxiangtongji" style="height:306px"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-col-md12">
                  <div id="shuijiancewuranwutongji" style="height:298px"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="layui-col-md1" style="width: 380px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle">
                  气在线监控
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:260px!important">
                    <div class="monitorTitle fixedValue">气在线监控企业<label class="changeValueColor monitorTitle labelFontWeight" id="AirBusinessCount"></label> 家</div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u713.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">国控气监控</div>
                        <div class="changeValueColor labelFontSize"><label id="AirBusinessUnitTypeCount"></label>家</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u719.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">非国控监控企业</div>
                        <div class="changeValueColor labelFontSize"><label id="AirBusinessUnUnitTypeCount"></label>家</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u725.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">废气排口</div>
                        <div class="changeValueColor labelFontSize"><label id="AirWasteGasPointCount"></label>个</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u731.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">VOCs排口</div>
                        <div class="changeValueColor labelFontSize"><label id="AirVOCPointCount"></label>个</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader">
                  排放规律统计（排放口）
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:244px!important">
                    <div id="qipaifangleixingtongji" style="height:244px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-col-md12">
                  <div id="qijiancewuranwutongji" style="height:298px"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="layui-col-md1" style="width: 380px;">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader bigtitle">
                    LDAR检漏
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:260px!important">
                    <div class="monitorTitle fixedValue">计划检漏企业<label class="changeValueColor monitorTitle labelFontWeight" id="countLDARCompany"></label> 家</div>
                    <div class="monitorDiv vocsMonitorDiv">
                      <img src="../start/wholeindex/首页/u713.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">计划检漏点数</div>
                        <div class="changeValueColor labelFontSize"><label id="planExaminePoint"></label>处</div>
                      </div>
                    </div>
                    <div class="monitorDiv">
                      <img src="../start/wholeindex/首页/u725.png" width="53px" height="48px">
                      <div>
                        <div class="fixedValue">已检漏点数</div>
                        <div class="changeValueColor labelFontSize"><label id="doExaminePoint"></label>处</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-col-md12">
                  <div id="nianduxiaojianliangtongji" style="height:306px"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
              <div class="layui-card indexcard">
                <div class="layui-card-header indexcardheader">
                  检漏任务总进度统计
                </div>
                <div class="layui-card-body">
                  <div class="layui-carousel layadmin-backlog indexcard" style="height:236px!important">
                    <div id="jianlourenwuzongjindutongji"  style="height:236px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script id="showInfo" type="text/html">
  <div class="layui-fluid" id="LAY-app-message-detail">
    <div class="layui-card layuiAdmin-msg-detail">
      <div >
        <div class="layui-card-header">
          <h1 id="s_title"></h1>
          <p>
            <span id="s_publishdate"></span>
          </p>
        </div>
        <div class="layui-card-body layui-text">
          <div class="layadmin-text" id="s_content">

          </div>
        </div>
      </div>
    </div>
  </div>
</script>

<script>
    layui.use(['admin', 'laytpl', 'element', 'table', 'echarts','attachment'], function () {
        var $ = layui.$
            , admin = layui.admin
            ,router = layui.router()
            ,search = router.search
            , laytpl = layui.laytpl
            , table = layui.table
            , element = layui.element
            , setter = layui.setter
            ,attachment = layui.attachment
            ,global_obj = {}
            ,form = layui.form
            , echarts = layui.echarts
            , baseurl1 = setter.remoteServiceAddress + "/sys/sysinformschedule"
            , baseurl2 = setter.remoteServiceAddress + "/statistics/total";
        // TDTMapNew.init(2,admin,setter,$,null);
        BaiduMap.init(2,admin,setter,$,null);
        var loadindex = layer.load(0);
        admin.req({//
            url: setter.remoteServiceAddress + "/map/queryCominfoList"
            ,data:{
                regulatoryLevel:null
                ,companyName:null
                ,wasteType:null
                ,creditEvaluation:null
                ,otherCondition:null

            }
            , done: function (result) {
                layer.close(loadindex);
                BaiduMap.addPointsInMap(admin,setter,$,result.data,[],0);
            }
            ,complete:function (res) {
                layer.close(loadindex);
            }
        });

        onlineAirMonitorTpl("airMonitor",7,"LAY-online-airMonitor");
        onlineAirMonitorTpl("waterMonitor",8,"LAY-online-waterMonitor");

        function onlineAirMonitorTpl($dom,differType,$table) {
            admin.req({//
                url: baseurl2+"/getMonitorPoint"
                ,data:{"url":setter.getNetForMapUrl+setter.onlineAirMonitorUrl+"?pointType="+differType}
                , done: function (result) {
                    var data=result.data;
                    var airMonitor=$("#"+$dom);
                    for(var i=0;i<data.length;i++){
                        var option=$("<option>").val(data[i].Id).text(data[i].SewageOutfallName);
                        airMonitor.append(option);
                    }
                    var id=airMonitor.val();
                    if(id!="" & id!=null){
                        onlineAirMonitorFactorTpl(id,$table);
                    }
                    airMonitor.change(function () {
                        id=$(this).val();
                        if(id!="" & id!=null){
                            onlineAirMonitorFactorTpl(id,$table);
                        }
                    })

                }
            });

            function onlineAirMonitorFactorTpl(id,$table) {
                var index = layer.load(0);
                admin.req({//
                    url: baseurl2+"/getMonitorFactor"
                    ,data:{"url":setter.getNetForMapUrl+setter.onlineAirMonitorFactorUrl+"?DischargeInfoId="+id}
                    , done: function (result) {
                        layer.close(index);
                        var data=result.data;
                        var onlineAirMonitor=$("#"+$table);
                        onlineAirMonitor.html("");
                        onlineAirMonitor.addClass("airMonitorTable");
                        if(data.length>10){
                            onlineAirMonitor.attr("style","height: 420px;");
                        }
                        var thead=$("<thead>");
                        var tr=$("<tr>");
                        var tda=$("<th>").text("序号").attr("style","width: 60px");
                        var tdb=$("<th>").text("因子名称").attr("style","width: 120px");
                        var tdc=$("<th>").text("检测值").attr("style","width: 120px");
                        var tdd=$("<th>").text("单位").attr("style","width: 100px");
                        tr.append(tda);
                        tr.append(tdb);
                        tr.append(tdc);
                        tr.append(tdd);
                        thead.append(tr);
                        onlineAirMonitor.append(thead);
                        var tbody=$("<tbody>");

                        for(var i=0;i<data.length;i++){
                            var trf=$("<tr>");
                            var tdfa=$("<td>").text(i+1).attr("style","width: 60px");
                            var tdfb=$("<td>").text(data[i].FactorInfoName).attr("style","width: 120px");
                            var tdfc=$("<td>").text(data[i].Rtd).attr("style","width: 120px");
                            var tdfd=$("<td>").text(data[i].Unit).attr("style","width: 100px");
                            trf.append(tdfa);
                            trf.append(tdfb);
                            trf.append(tdfc);
                            trf.append(tdfd);
                            tbody.append(trf);
                            onlineAirMonitor.append(tbody);
                        }

                    }
                    ,complete:function (res) {
                        layer.close(index);
                    }
                });
            }

        }

        firstMapTpl();

        function firstMapTpl() {
            admin.req({//
                url: baseurl2+"/baseInfo"
                , done: function (result) {
                    var data=result.data;
                    for(var i=0;i<data.length;i++){
                        if(data[i].type==1){
                            $("#allCompanyTotal").text(data[i].count);
                        }
                        if(data[i].type==2){
                            $("#key_point_source").text(data[i].count);
                        }
                        if(data[i].type==3){
                            $("#solid_waste_source").text(data[i].count);
                        }
                        if(data[i].type==8){
                            $("#key_blowdown_source").text(data[i].count);
                        }
                        if(data[i].type==5){
                            $("#radioactive_source").text(data[i].count);
                        }
                        if(data[i].type==6){
                            $("#risk_source").text(data[i].count);
                        }
                        if(data[i].type==9){
                            $("#voc_source").text(data[i].count);
                        }
                    }

                }
            });
        }

//        $(".homepageButton").bind("click",function () {
//            location.hash = search.redirect ? decodeURIComponent(search.redirect) : '/';
//        });

        onlinePointData("airOnlineMonitorTotal",7);
        onlinePointData("waterOnlineMonitorTotal",8);
        function onlinePointData($dom,differType) {
            admin.req({//
                url: baseurl2+"/onlinePointData"
                ,data:{"url":setter.getNetForMapUrl+setter.onlinePointUrl+"?pointType="+differType}
                , done: function (result) {
                    var data=result.data;
                    onlinePointTpl($dom,data);
                }
            });
        }

        function onlinePointTpl($dom,data) {
            Highcharts.chart($dom,{
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie',
                    backgroundColor: 'rgba(0,0,0,0)'
                },
                title: {
                    text: ''
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: <b>{y}个</b>  {point.percentage:.1f} %',
                            style: {
                                color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || '#fff',
                                fontSize:'16px'
                            }
                        }
                    }
                },
                series: [{
                    name:"占比",
                    colorByPoint: true,
                    data: [{
                        name: '断网',
                        y: Number(data[0].BrokenNetCount)
                    }, {
                        name: '联网',
                        y: Number(data[0].NetWorkCount)
                    }]
                }]
            });
        }


       getCompanyTypeTpl();
       function getCompanyTypeTpl() {
          admin.req({//
              url: baseurl2+"/getCompanyType"
              , done: function (result) {
                  var data=result.data;
                  var categories=[];
                  var dataTpl=[];
                  for(var i=0;i<data.length;i++){
                      categories.push(data[i].name);
                      var y={y:data[i].count};
                      dataTpl.push(y);
                  }
                  wastePositionTpl(categories,dataTpl)
              }
          });
       }

        function wastePositionTpl(categories,dataTpl) {
          Highcharts.chart('wastePosition',{
              credits: {
                  enabled: false
              },
              chart: {
                  type: 'bar',
                  // backgroundColor: {
                  //     linearGradient: [0, 0, 0, 500],
                  //     stops: [
                  //         [0, 'rgb(5, 235, 235)'],
                  //         [1, 'rgb(39, 111, 210)']
                  //     ]
                  // },
                  backgroundColor: 'rgba(0,0,0,0)'
              },
              colors: ['#90ed7d', '#434348', '#f7a35c', '#8085e9',
                  '#f15c80', '#e4d354', '#2b908f', '#f45b5b', '#91e8e1']
              ,
              exporting:{
                  enabled:false
              },
              title: {
                  text: '',
                  align:'left',
                  style:{ "color": "#333333", "fontSize": "14px"}
              },
              legend:{
                  enabled:false
              },
              xAxis: {
                  categories:categories,
                  // crosshair: true
                  type:"category",
                  labels:{
                      style:{ "color": "#fff", "cursor": "default", "fontSize": "12px" }
                  },
              },
              yAxis: {
                  // min: 0,
                  title: {
                      text: ''
                  },
                  // labels:{
                  //     style:{ "color": "#fff", "cursor": "default", "fontSize": "12px" }
                  // }
                  enabled:false
              },
              tooltip: {
                  // head + 每个 point + footer 拼接成完整的 table
                  headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                  pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                  '<td style="padding:0"><b>{point.y}</b></td></tr>',
                  footerFormat: '</table>',
                  shared: true,
                  useHTML: true
              },
              plotOptions: {
                  column: {
                      borderWidth: 0
                  }
              },
              series: [{
                  name:'数量',
                  colorByPoint: true,
                  data: dataTpl
              }]
          });
        }

        getOnlineBaseInfoData();

        function getOnlineBaseInfoData(){
            admin.req({//
                url: baseurl2+"/onlinePointData"
                ,data:{"url":setter.getNetForMapUrl+setter.getOnlineBaseInfoUrl}
                , done: function (result) {
                    var data=result.data;
                    $("#AirPointCount").text(data[0].AirPointCount);
                    $("#WaterPointCount").text(data[0].WaterPointCount);
                    $("#WaterBusinessCount").text(data[0].WaterBusinessCount);
                    $("#AirBusinessCount").text(data[0].AirBusinessCount);
                    $("#WaterBusinessUnitTypeCount").text(data[0].WaterBusinessUnitTypeCount);
                    $("#WaterBusinessUnUnitTypeCount").text(data[0].WaterBusinessUnUnitTypeCount);
                    $("#AirBusinessUnitTypeCount").text(data[0].AirBusinessUnitTypeCount);
                    $("#AirBusinessUnUnitTypeCount").text(data[0].AirBusinessUnUnitTypeCount);
                    $("#WaterSewagePointCount").text(data[0].WaterSewagePointCount);
                    $("#WaterRainPointCount").text(data[0].WaterRainPointCount);
                    $("#AirWasteGasPointCount").text(data[0].AirWasteGasPointCount);
                    $("#AirVOCPointCount").text(data[0].AirVOCPointCount);
                }
            });
        }

        getDischargeToData();

        function getDischargeToData() {
            admin.req({//
                url: baseurl2+"/getDischargeTo"
                ,data:{"url":setter.getNetForMapUrl+setter.getDischargeToUrl}
                , done: function (result) {
                    var data=result.data;
                    var dataTpl=[];
                    for(var i=0;i<data.length;i++){
                        var y={name:data[i].DischargeDirectionName,y:Number(data[i].DischargeDirectionCount)};
                        dataTpl.push(y);
                    }
                    getDischargeToTpl(dataTpl);
                }
            });
        }

        function getDischargeToTpl(data) {
          Highcharts.chart('shuipaifangquxiangtongji',{
              credits: {
                  enabled: false
              },
              chart: {
                  type: 'column',
                  backgroundColor: {
                      linearGradient: [0, 0, 500, 500],
                      stops: [
                          [0, '#0be5e2'],
                          [1, '#0b4de5']
                      ]
                  },
              },
              colors: ['#90ed7d', '#f7a35c', '#434348', '#8085e9',
                  '#f15c80', '#e4d354', '#2b908f', '#f45b5b', '#91e8e1']
              ,
              exporting:{
                  enabled:false
              },
              title: {
                  text: '水排放去向统计（排放口）',
                  align:'left',
                  style:{ "color": "white", "fontSize": "14px"}
              },
              legend:{
                  enabled:false
              },
              xAxis: {
                  type:"category",
                  labels:{
                      style:{ "color": "#333333", "cursor": "default", "fontSize": "12px" }
                  }
              },
              yAxis: {
                  min: 0,
                  title: {
                      text: ''
                  },
                  labels:{
                      style:{ "color": "#333333", "cursor": "default", "fontSize": "12px" }
                  }
              },
              tooltip: {
                  // head + 每个 point + footer 拼接成完整的 table
                  headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                  pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                  '<td style="padding:0"><b>{point.y}</b></td></tr>',
                  footerFormat: '</table>',
                  shared: true,
                  useHTML: true
              },
              plotOptions: {
                  column: {
                      borderWidth: 0
                  }
              },
              series: [{
                  name: '个',
                  colorByPoint: true,
                  data: data
              }]
          });
        }

        getWaterWasteTotalData("shuijiancewuranwutongji",0);
        getWaterWasteTotalData("qijiancewuranwutongji",1);

        function getWaterWasteTotalData($dom,differType) {
            admin.req({//
                url: baseurl2+"/getWaterWasteTotal"
                ,data:{"url":setter.getNetForMapUrl+setter.getWaterWasteTotalUrl+"?monitorType="+differType}
                , done: function (result) {
                    var data=result.data;
                    var dataTpl=[];
                    for(var i=0;i<data.length;i++){
                        var y={name:data[i].FactorName,y:Number(data[i].FactorCount)};
                        dataTpl.push(y);
                    }
                    getWaterWasteTotalTpl($dom,dataTpl);
                }
            });
        }

        function getWaterWasteTotalTpl($dom,data) {

          Highcharts.chart($dom,{
              credits: {
                  enabled: false
              },
              chart: {
                  type: 'column',
                  backgroundColor: {
                      linearGradient: [0, 0, 500, 500],
                      stops: [
                          [0, '#0be5e2'],
                          [1, '#0b4de5']
                      ]
                  },
              },
              colors: ['#90ed7d', '#f7a35c', '#434348', '#8085e9',
                  '#f15c80', '#e4d354', '#2b908f', '#f45b5b', '#91e8e1']
              ,
              exporting:{
                  enabled:false
              },
              title: {
                  text: '监测污染物统计（排放口）',
                  align:'left',
                  style:{ "color": "white", "fontSize": "14px"}
              },
              legend:{
                  enabled:false
              },
              xAxis: {
                  type:"category",
                  labels:{
                      style:{ "color": "#333333", "cursor": "default", "fontSize": "12px" }
                  }
              },
              yAxis: {
                  min: 0,
                  title: {
                      text: ''
                  },
                  labels:{
                      style:{ "color": "#333333", "cursor": "default", "fontSize": "12px" }
                  }
              },
              tooltip: {
                  // head + 每个 point + footer 拼接成完整的 table
                  headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                  pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                  '<td style="padding:0"><b>{point.y}</b></td></tr>',
                  footerFormat: '</table>',
                  shared: true,
                  useHTML: true
              },
              plotOptions: {
                  column: {
                      borderWidth: 0
                  }
              },
              series: [{
                  name: '数量（个）',
                  colorByPoint: true,
                  data: data
              }]
          });
        }

        getDischargeTypeData();

        function getDischargeTypeData() {
            admin.req({//
                url: baseurl2+"/getDischargeTo"
                ,data:{"url":setter.getNetForMapUrl+setter.getDischargeTypeUrl}
                , done: function (result) {
                    var data=result.data;
                    var dataTpl=[];
                    for(var i=0;i<data.length;i++){
                        var y={name:data[i].EmissionLawName,y:Number(data[i].EmissionLawCount)};
                        dataTpl.push(y);
                    }
                    getDischargeTypeTpl(dataTpl);
                }
            });
        }

        function getDischargeTypeTpl(data) {
          Highcharts.chart('qipaifangleixingtongji',{
              credits: {
                  enabled: false
              },
              exporting:{
                  enabled:false
              },
              chart: {
                  plotBackgroundColor: null,
                  plotBorderWidth: null,
                  plotShadow: false,
                  type: 'pie',
                  backgroundColor: 'rgba(0,0,0,0)'
              },
              title: {
                  text: ''
              },
              tooltip: {
                  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
              },
              plotOptions: {
                  pie: {
                      allowPointSelect: true,
                      cursor: 'pointer',
                      dataLabels: {
                          enabled: true,
                          format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                          style: {
                              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || '#fff',
                              fontSize:'16px'
                          }
                      }
                  }
              },
              series: [{
                  name: '占比',
                  colorByPoint: true,
                  data: data
              }]
          });
        }


        function addTpl(num1,num2) {
            num1=Number(num1)+Number(num2);
            return num1;
        }

        getLDARInfoTotalData();
        function getLDARInfoTotalData() {
            //默认年份
            admin.req({//
                url: setter.remoteServiceAddress + "/common/exportExcel/getDate"
                , done: function (result) {
                    var date = new Date(result.date);
                    var year = date.getFullYear();
                    var oldYear=Number(year)-1;
                    admin.req({//
                        url: baseurl2+"/getLDARInfoTotal"
                        ,data:{"url":setter.getJavaForMapUrl+setter.getLDARInfoTotalUrl}
                        , done: function (result) {
                            var data=result.data;
                            if(data!=null&data!=''){
                                $("#countLDARCompany").text(data.length);
                            }else {
                                $("#countLDARCompany").text(0);
                            }
                            var planExaminePoint=0;
                            var doExaminePoint=0;
                            var allPoints=0;
                            var checkedPoints=0;
                            var leakPoints=0;
                            var repairedPoints=0;
                            var notrepairedPoints=0;
                            var oldAllPoints=0;
                            var oldCheckedPoints=0;
                            var oldLeakPoints=0;
                            var oldRepairedPoints=0;
                            var oldNotrepairedPoints=0;

                            for(var i=0;i<data.length;i++){
                                planExaminePoint=addTpl(planExaminePoint,data[i].allPoints);
                                doExaminePoint=addTpl(doExaminePoint,data[i].checkedPoints);
                                if(data[i].setYear==year){
                                    allPoints=addTpl(allPoints,data[i].allPoints);
                                    checkedPoints=addTpl(checkedPoints,data[i].checkedPoints);
                                    leakPoints=addTpl(leakPoints,data[i].leakPoints);
                                    repairedPoints=addTpl(repairedPoints,data[i].repairedPoints);
                                    notrepairedPoints=addTpl(notrepairedPoints,data[i].notrepairedPoints);
                                }
                                if(data[i].setYear==oldYear){
                                    oldAllPoints=addTpl(oldAllPoints,data[i].allPoints);
                                    oldCheckedPoints=addTpl(oldCheckedPoints,data[i].checkedPoints);
                                    oldLeakPoints=addTpl(oldLeakPoints,data[i].leakPoints);
                                    oldRepairedPoints=addTpl(oldRepairedPoints,data[i].repairedPoints);
                                    oldNotrepairedPoints=addTpl(oldNotrepairedPoints,data[i].notrepairedPoints);
                                }
                            }
                            $("#planExaminePoint").text(planExaminePoint);
                            $("#doExaminePoint").text(doExaminePoint);
                            var series=[{name:"计划检测点数",data:[Number(oldAllPoints),Number(allPoints)]}
                                ,{name:"已检测点数",data:[Number(oldCheckedPoints),Number(checkedPoints)]}
                                ,{name:"泄漏点数",data:[Number(oldLeakPoints),Number(leakPoints)]}
                                ,{name:"已修复点数",data:[Number(oldRepairedPoints),Number(repairedPoints)]}
                                ,{name:"延迟修复点数",data:[Number(oldNotrepairedPoints),Number(notrepairedPoints)]}
                            ];
                            getLDARInfoTotalTpl(series);
                            var scale=arithmetic.accDiv(doExaminePoint,planExaminePoint);
                            scale=arithmetic.accMul(scale,100);
                            scale=scale.toFixed(2);
                            getLDARInfoTotalBar(Number(scale));
                        }
                    });
                }
            });
        }

        function getLDARInfoTotalTpl(series) {
            Highcharts.chart('nianduxiaojianliangtongji',{
                credits: {
                    enabled: false
                },
                chart: {
                    type: 'column',
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#0be5e2'],
                            [1, '#0b4de5']
                        ]
                    }
                },
                colors: ['#90ed7d', '#f7a35c', '#434348', '#8085e9',
                    '#f15c80', '#e4d354', '#2b908f', '#f45b5b', '#91e8e1']
                ,
                exporting:{
                    enabled:false
                },
                title: {
                    text: '企业年度已检漏点数',
                    align:'left',
                    style:{ "color": "white", "fontSize": "14px"}
                },
                legend:{
                    enabled:false
                },
                xAxis: {
                    categories: ['去年','今年'],
                    crosshair: true
                    ,labels:{
                        style:{ "color": "#333333", "cursor": "default", "fontSize": "12px" }
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: ''
                    },
                    labels:{
                        style:{ "color": "#333333", "cursor": "default", "fontSize": "12px" }
                    }
                },
                tooltip: {
                    // head + 每个 point + footer 拼接成完整的 table
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.0f}处</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        borderWidth: 0
                    }
                },
                series: series
            });
        }

        function getLDARInfoTotalBar(y) {

            Highcharts.chart('jianlourenwuzongjindutongji',{
                chart: {
                    type: 'solidgauge',
                    backgroundColor: 'rgba(0,0,0,0)'
                },
                exporting:{
                    enabled:false
                },
                title: null,
                pane: {
                    center: ['50%', '50%'],
                    size: '100%',
                    startAngle: -135,
                    endAngle: 135,
                    background: {
                        backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                        innerRadius: '80%',
                        outerRadius: '100%',
                        shape: 'arc'
                    }
                },
                tooltip: {
                    enabled: false
                },
                plotOptions: {
                    solidgauge: {
                        dataLabels: {
                            y: -25,
                            borderWidth: 0,
                            useHTML: true
                        }
                    }
                },
                yAxis: {
                    min: 0,
                    max: 100,
                    title: {
                        text: ''
                    },
                    stops: [
                        [0.1, '#DF5353'], // green
                        [0.5, '#DDDF0D'], // yellow
                        [0.9, '#55BF3B'] // red
                    ],
                    lineWidth: 0,
                    minorTickInterval: null,
                    tickPixelInterval: 100,
                    tickWidth: 0,
                    title: {
                        y: -70
                    },
                    labels: {
                        y: 16
                    }
                },
                credits: {
                    enabled: false
                },
                series: [{
                    name: '',
                    data: [{
                        y:y,
                        innerRadius: 80,
                        // radius: 98,
                        name:'dd'
                    }],
                    dataLabels: {
                        format: '<div style="text-align:center"><span style="font-size:25px;color:#05D1E7">{y} %</span><br/>'
                    }
                }]
            });
        }

    });
</script>

