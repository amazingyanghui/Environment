
<style type="text/css">
  .index_card{
    background-color: rgba(17, 38, 79, 1);
  }
  .index_card_header{
    border-bottom: 0;
  }
  .big_title{
    font-size: 18px;
    color: #8BF9FF;
    font-family: "微软雅黑", "Microsoft YaHei";
  }
  .topBorder{
    height: 13px;
    width: 16px;
    background-color: #8BF9FF;
    border: 1px solid #8BF9FF;
    display: inline-block;
  }
  #centerMapTop label{
    cursor: pointer;
  }
  .topOldBorder{
    height: 13px;
    width: 16px;
    background-color: #8BF9FF;
    border: 1px solid #8BF9FF;
    display: inline-block;
    /*cursor: pointer;*/
  }
  .topNewBorder{
    height: 13px;
    width: 16px;
    background-color: white;
    border: 1px solid white;
    display: inline-block;
    /*cursor: pointer;*/
  }
  .first_border_height{
    float: left;
    width: 184px;
    height: 70px;
    margin-left: 18px;
    margin-right: 6px;
    margin-bottom: 12px;
    background-image: url("../start/wholeindex/首页/u102.png");
  }
  .first_border_height img{
    left: 0;
    top: 0;
    width: 42px;
    height: 42px;
    float: left;
    margin: 20px;
  }
  .first_border_height div{
    margin-top: 12px;
  }
  .right_border_height{
    float: left;
    width: 140px;
    height: 80px;
    /*margin-left: 2px;*/
    /*margin-right: 5px;*/
    /*margin-bottom: 10px;*/
  }
  .right_border_height img{
    left: 0;
    top: 0;
    width: 42px;
    height: 42px;
    float: left;
    margin-right: 5px;
    margin-top: 5px;
  }
  .top-space5{
    margin-top: 5px;
  }
  .top-space10{
    margin-top: 10px;
  }
  .top-space15{
    margin-top: 15px;
  }
  .top-space20{
    margin-top: 20px;
  }
  .left_space15{
    margin-left: 15px;
  }
  .left_space5{
    margin-left: 5px;
  }
  .left_space10{
    margin-left: 10px;
  }
  .left_space5{
    margin-left: 5px;
  }
  .right_space15{
    margin-right: 15px;
  }
  .font_golden{
    color: #FFD553;
  }
  .font_white{
    color: white;
  }
  .font_peach{
    color: #BD4B6B;
  }
  .font_green{
    color: #98D876;
  }
  .font_cyan{
    color: #05D1E7;
  }
  .font_blue{
    color: #8BF9FF;
  }

  .fontSize12{
    font-size: 12px;
  }
  .fontSize14{
    font-size: 14px;
  }
  .fontSize16{
    font-size: 16px;
  }
  .fontSize18{
    font-size: 18px;
  }
  .fontSize22{
    font-size: 22px;
  }
  #secondTitle div{
    margin-top: 15px;
    margin-right: 15px;
  }
  .second_old_label{
    border: 1px solid rgba(17, 38, 79, 1);
    padding:5px;
    color: white;
    font-size: 12px;
    background-color: rgba(17, 38, 79, 1);
    cursor: pointer;
    /*border-radius: 12%;*/
  }
  .second_new_label{
    border: 1px solid #05D1E7;
    padding:5px;
    color: white;
    font-size: 12px;
    background-color: #05D1E7;
    border-radius: 12%;
    cursor: pointer;
  }
  .right_old_label{
    border: 1px solid rgba(17, 38, 79, 1);
    padding:5px;
    color: white;
    font-size: 12px;
    background-color: rgba(17, 38, 79, 1);
    cursor: pointer;
  }
  .right_new_label{
    border: 1px solid #05D1E7;
    padding:5px;
    color: white;
    font-size: 12px;
    background-color: #05D1E7;
    border-radius: 12%;
    cursor: pointer;
  }
  .right_border_center_height{
    float: left;
    width: 170px;
    height: 55px;
    text-align: center;
    margin-left: 18px;
    margin-right: 6px;
    margin-bottom: 12px;
    background-image: url("../start/wholeindex/首页/u101.png");
  }
  .online_waster_and_air{
    margin-top: 20px;
  }
  .online_waster_and_air label{
    position: absolute;
    top:8px;
    left:22px;
  }
  .online_waster_and_air img{
    height: 70px;
    width:70px;
  }
  .first_waste_color{
    color: #2B94FF;
  }
  .second_waste_color{
    color: #98D87D;
  }
  .third_waste_color{
    color: #EE5C5C;
  }
  #waterAndAir div{
    margin-bottom: 15px;
  }
  #waterAndAir div label{
    cursor: pointer;
    border-radius: 50%;
    padding: 5px;
  }
  .old_waterAndAir{
    border: 1px solid white;
    color: white;
  }
  .new_waterAndAir{
    border: 1px solid #05D1E7;
    color: #05D1E7;
  }
  .outWaste_companyNum_first{
    border: 1px solid #05D1E7;
    border-radius: 10%;
    padding: 15px 35px;
  }
  .outWaste_companyNum_second{
    border: 1px solid #05D1E7;
    border-radius: 10%;
    padding: 15px 20px;
  }
  .administrativeAndPenaltyFirst{
    font-size: 12px;
    color: white;
    border: 1px solid #05D1E7;
    border-radius: 10%;
    padding: 15px 35px;
  }
  .administrativeAndPenaltySecond{
    font-size: 12px;
    color: white;
    border: 1px solid #05D1E7;
    border-radius: 10%;
    padding: 15px 23px;
  }
  #vocCheckNum{
    color: #05D1E7;
    font-size: 22px;
    position: absolute;
    top:42px;
    left: 92px;
    z-index: 1;
  }

</style>

<div  lay-filter="layadmin-layui-fluid" style="overflow: auto">
  <div class="layui-row layui-col-space15" style="width: 1920px;height:1000px;background-color: #0C0C0C;overflow-y:hidden">
    <div class="layui-col-md12">
      <div class="layui-row">
        <div style="width: 440px;display:inline-block;float: left;" class="left_space5">
          <div class="layui-card index_card" style="height: 355px">
            <div class="layui-card-header big_title index_card_header">
              <div class="topBorder"></div>
              <label>企业信息概况</label>
            </div>
            <div class="layui-card-body">
              <div class="layui-col-md12">
                <div class="layui-row layui-col-space15 fontSize18 font_white">
                  <div class="layui-col-md5 layui-col-md-offset1">
                    <div style="float: right">
                      全区累计企业总数：
                    </div>
                  </div>
                  <div class="layui-col-md2 font_golden fontSize22" id="allCompanyTotal">
                    3088
                  </div>
                  <div class="layui-col-md4">
                    家
                  </div>
                </div>
                <div class="layui-row layui-col-space10 top-space15">
                  <div class="first_border_height">
                    <img src="../start/wholeindex/首页/u117.png">
                    <div>
                      <div class="fontSize16 font_white">区重点源</div>
                      <div><label class="font_golden fontSize18" id="key_point_source">1602</label><label class="fontSize12 font_white left_space5">家</label></div>
                    </div>
                  </div>
                  <div class="first_border_height">
                    <img src="../start/wholeindex/首页/u159.png">
                    <div>
                      <div class="fontSize16 font_white">固废产废源</div>
                      <div><label class="font_peach fontSize18" id="solid_waste_source">188</label><label class="fontSize12 font_white left_space5">家</label></div>
                    </div>
                  </div>
                  <div class="first_border_height">
                    <img src="../start/wholeindex/首页/u117.png">
                    <div>
                      <div class="fontSize16 font_white">在线监控企业</div>
                      <div><label class="font_peach fontSize18" id="online_company">36</label><label class="fontSize12 font_white left_space5">家</label></div>
                    </div>
                  </div>
                  <div class="first_border_height">
                    <img src="../start/wholeindex/首页/u117.png">
                    <div>
                      <div class="fontSize16 font_white">放射源</div>
                      <div><label class="font_green fontSize18" id="radioactive_source">126</label><label class="fontSize12 font_white left_space5">家</label></div>
                    </div>
                  </div>
                  <div class="first_border_height">
                    <img src="../start/wholeindex/首页/u117.png">
                    <div>
                      <div class="fontSize16 font_white">风险源</div>
                      <div><label class="font_green fontSize18" id="risk_source">234</label><label class="fontSize12 font_white left_space5">家</label></div>
                    </div>
                  </div>
                  <div class="first_border_height">
                    <img src="../start/wholeindex/首页/u117.png">
                    <div>
                      <div class="fontSize16 font_white">污水处理厂</div>
                      <div><label class="font_golden fontSize18" id="sewage_treatment_works">2</label><label class="fontSize12 font_white left_space5">家</label></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12" style="margin-top: -5px;">
            <div class="layui-card index_card" style="height: 315px">
              <div class="layui-col-md12" style="height: 35px;" id="secondTitle">
                <div class="layui-col-md2 layui-col-md-offset1">
                  <label data-name="0">行业分布</label>
                </div>
                <div class="layui-col-md2">
                  <label data-name="1">污染类别</label>
                </div>
                <div class="layui-col-md2">
                  <label data-name="2">企业规模</label>
                </div>
                <div class="layui-col-md2">
                  <label data-name="3">风险源等级</label>
                </div>
              </div>
              <div class="layui-col-md12" style="height: 275px">
                  <div id="secondMap" style="width:95%;height: 95%;" class="top-space15 left_space15">

                  </div>
              </div>
            </div>
          </div>
        </div>
        <div style="width: 955px;display: inline-block" class="left_space10">
          <div class="layui-card index_card" style="height: 680px">
            <div class="layui-card-header big_title index_card_header" id="centerMapTop">
              <div class="layui-col-md2">
                <div class="topOldBorder"></div>
                <label data-name="0">企业分布图</label>
              </div>
              <div class="layui-col-md2">
                <div class="topOldBorder"></div>
                <label data-name="1">水自动监控</label>
              </div>
              <div class="layui-col-md2">
                <div class="topOldBorder"></div>
                <label data-name="2">气自动监控</label>

              </div>
              <div class="layui-col-md2">
                <div class="topOldBorder"></div>
                <label data-name="3">VOCs自动监控</label>
              </div>
            </div>
            <div class="layui-card-body">
              <div class="layui-col-md12">
                <div class="layui-row layui-col-space15">
                  <div id="centerMapContent"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style="width: 480px;display: inline-block;" class="left_space10">
          <div class="layui-col-md12">
            <div class="layui-card index_card" style="height: 320px">
              <div class="layui-card-header big_title index_card_header">
                <div class="topBorder"></div>
                <label>空气质量</label>
              </div>
              <div class="layui-card-body">
                <div class="layui-row layui-col-space10">
                  <div class="layui-col-md12">
                      <div class="right_border_height">
                        <img src="../start/wholeindex/首页/u447.png">
                        <div>
                          <div class="fontSize14 font_white">年度污染天数</div>
                          <div class="font_golden fontSize16"><label id="annual_pollution_days">127<label></label>天</label></div>
                        </div>
                      </div>
                      <div class="right_border_height">
                        <img src="../start/wholeindex/首页/u453.png">
                        <div>
                          <div class="fontSize14 font_white">年度优良天数</div>
                          <div class="font_golden fontSize16"><label id="good_days_of_the_year">167</label><label>天</label></div>
                        </div>
                      </div>
                      <div class="right_border_height" style="width: 175px;">
                        <img src="../start/wholeindex/首页/u459.png">
                        <div>
                          <div class="fontSize14 font_white"><label>今日空气质量</label><label class="font_golden fontSize16 left_space5" id="air_quality_today">良</label></div>
                          <div class="fontSize14 font_white"><label>主要污染物</label><label class="font_golden fontSize16 left_space5" id="key_pollutant">PM2.5</label></div>
                        </div>
                      </div>
                  </div>
                  <div class="layui-col-md12">
                    <div id="curYearAirTotalCount" style="height: 175px"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-col-md12 top-space10">
            <div class="layui-card index_card" style="height: 350px">
              <div class="layui-card-header big_title index_card_header">
                <div class="layui-col-md9">
                  <div class="topBorder"></div>
                  <label>移动执法</label>
                </div>
                <div class="layui-col-md3" id="rightTitle">
                  <div class="layui-col-md4">
                    <label data-name="0">全部</label>
                  </div>
                  <div class="layui-col-md4">
                    <label data-name="1">本年</label>
                  </div>
                  <div class="layui-col-md4">
                    <label data-name="2">本月</label>
                  </div>
                </div>
              </div>
              <div class="layui-card-body">
                <div class="layui-col-md12">
                  <div id="mobile_enforce_the_law" style="height:160px"></div>
                  <div class="layui-col-md6">
                    <div class="right_border_center_height">
                      <div class="fontSize16 font_white top-space5">执法次数</div>
                      <div class="font_golden fontSize16"><label id="lawNumber">4084</label><label>次</label></div>
                    </div>
                  </div>
                  <div class="layui-col-md6">
                    <div class="right_border_center_height">
                      <div class="fontSize16 font_white top-space5">执法人数</div>
                      <div class="font_golden fontSize16"><label id="lawPersonNum">26</label><label>人</label></div>
                    </div>
                  </div>
                  <div class="layui-col-md6">
                    <div class="right_border_center_height">
                      <div class="fontSize16 font_white top-space5">发现违法行为数</div>
                      <div class="font_golden fontSize16"><label id="findLawNum">108</label><label>次</label></div>
                    </div>
                  </div>
                  <div class="layui-col-md6">
                    <div class="right_border_center_height">
                      <div class="fontSize16 font_white top-space5">立案数</div>
                      <div class="font_golden fontSize16"><label id="registeredNum">56</label><label>次</label></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="layui-col-md12" style="margin-top: -10px">
      <div style="width: 720px;display: inline-block;float: left" class="left_space5">
        <div class="layui-card index_card" style="height: 285px">
          <div class="layui-card-header big_title index_card_header">
            <div class="layui-col-md6">
              <div class="layui-col-md6">
                <div class="topBorder"></div>
                <label>在线监测</label>
              </div>
              <div class="layui-col-md6" id="bottomRightTitle">
                <div class="layui-col-md3 layui-col-md-offset6">
                  <label data-name="0">本年</label>
                </div>
                <div class="layui-col-md3">
                  <label data-name="1">本月</label>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-card-body">
            <div class="layui-col-md6">
              <div class="layui-col-md2" id="waterAndAir">
                <div class="layui-col-md12">
                  <label data-name="0">水</label>
                </div>
                <div class="layui-col-md12">
                  <label data-name="1">气</label>
                </div>
              </div>
              <div class="fontSize16 font_white" style="text-align: center;margin-left: 60px">本年累计废水排放量</div>
              <div class="layui-col-md3 online_waster_and_air">
                <label class="first_waste_color fontSize12">废水</label>
                <img src="../start/wholeindex/首页/u1025.png">
                <div class="first_waste_color top-space10 fontSize16 left_space5"><span id="wasteWater">85.26</span>亿吨</div>
              </div>
              <div class="layui-col-md3 online_waster_and_air left_space10">
                <label class="second_waste_color fontSize12">COD</label>
                <img src="../start/wholeindex/首页/u1018.png">
                <div class="second_waste_color top-space10 fontSize16 left_space5"><span id="COD">25.9</span>吨</div>
              </div>
              <div class="layui-col-md3 online_waster_and_air left_space10">
                <label class="third_waste_color fontSize12">氨氮</label>
                <img src="../start/wholeindex/首页/u1011.png">
                <div class="third_waste_color top-space10 fontSize16 left_space5"><span id="ammoniaNitrogen">0.66</span>千克</div>
              </div>
            </div>
            <div style="width: 20px;display: inline-block;">
              <img src="../start/wholeindex/首页/u1038.png">
            </div>
            <div style="width: 320px;display: inline-block;float: right">
              <div class="fontSize16 font_white" style="text-align: center;">工业废水排放量（<span id="outWaste_companyNum">68</span>家）</div>
              <div class="layui-col-md12" style="margin-top: 35px">
                <div class="layui-col-md6">
                  <div class="layui-col-md12">
                    <label class="fontSize12 font_white outWaste_companyNum_first">今日排放量</label>
                  </div>
                  <div class="layui-col-md12" style="margin-top: 40px;">
                      <label class="fontSize16 font_golden left_space15">12.55千万吨</label>
                  </div>
                </div>
                <div class="layui-col-md6">
                  <div class="layui-col-md12">
                    <div class="layui-col-md12">
                      <label class="fontSize12 font_white outWaste_companyNum_second">上月同比排放量</label>
                    </div>
                  </div>
                  <div class="layui-col-md12" style="margin-top: 40px;">
                    <label class="fontSize16 font_golden left_space15">21.38千万吨</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div style="width: 675px;display: inline-block;" class="left_space10">
        <div class="layui-card index_card" style="height: 285px">
          <div class="layui-card-header big_title index_card_header">
            <div class="layui-col-md6">
              <div class="layui-col-md6">
                <div class="topBorder"></div>
                <label>行政处罚</label>
              </div>
            </div>
          </div>
          <div class="layui-card-body">
            <div class="layui-col-md12">
              <div class="layui-col-md7">
                <div id="administrativeAndPenalty" style="height: 220px"></div>
              </div>
              <div style="width: 20px;display: inline-block;">
                <img style="margin-top: -170px" src="../start/wholeindex/首页/u1038.png">
              </div>
              <div style="width: 240px;display: inline-block;text-align: center;">
                <div class="layui-col-md12">
                  <div>
                    <label class="administrativeAndPenaltyFirst">本月处罚案件</label>
                  </div>
                </div>
                <div class="layui-col-md12">
                  <div style="margin-top: 30px">
                    <label class="font_golden fontSize18"><label id="administrativeAndPenaltyFirstNum">24</label> 件，</label><label class="fontSize12 font_white">环比上月下降<label id="administrativeAndPenaltySecondNum">6</label>%</label>
                  </div>
                </div>
                <div class="layui-col-md12">
                  <div style="margin-top: 30px">
                    <label class="administrativeAndPenaltySecond">本年累计处罚案件</label>
                  </div>
                </div>
                <div class="layui-col-md12">
                  <div style="margin-top: 30px">
                    <label class="font_golden fontSize18"><label>200</label> 件</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div style="width: 480px;display: inline-block;" class="left_space10">
        <div class="layui-card index_card" style="height: 285px">
          <div class="layui-card-header big_title index_card_header">
            <div class="layui-col-md12">
              <div class="layui-col-md5">
                <div class="topBorder"></div>
                <label>VOC检漏</label>
              </div>
              <div class="layui-col-md7" id="vocCheckDate">
                <div class="layui-col-md2 layui-col-md-offset8">
                  <label data-name="0">本年</label>
                </div>
                <div class="layui-col-md2">
                  <label data-name="1">本月</label>
                </div>
              </div>
            </div>
          </div>
          <div class="layui-card-body">
            <div class="layui-col-md12">
              <div class="layui-col-md6">
                <div class="layui-col-md12">
                  <div id="vocCheckNum">75%</div>
                  <div id="vocCheckFirst" style="height: 150px;">

                  </div>
                </div>
                <div class="layui-col-md12 top-space10">
                  <div class="right_border_center_height" style="margin-left: 30px">
                    <div class="fontSize16 font_white top-space5">计划捡漏</div>
                    <div class="font_golden fontSize16"><label id="vocPlanNum">14084</label><label>个</label></div>
                  </div>
                </div>
              </div>
              <div class="layui-col-md6">
                <div class="layui-col-md12">
                  <div id="vocCheckSecond" style="height: 150px;">

                  </div>
                </div>
                <div class="layui-col-md12 top-space10">
                  <div class="right_border_center_height" style="margin-left: 30px">
                    <div class="fontSize16 font_white top-space5">已完成捡漏</div>
                    <div class="font_golden fontSize16"><label id="doVocPlanNum">10563</label><label>个</label></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--<script id="showInfo" type="text/html">-->
  <!--<div class="layui-fluid" id="LAY-app-message-detail">-->
    <!--<div class="layui-card layuiAdmin-msg-detail">-->
      <!--<div >-->
        <!--<div class="layui-card-header">-->
          <!--<h1 id="s_title"></h1>-->
          <!--<p>-->
            <!--<span id="s_publishdate"></span>-->
          <!--</p>-->
        <!--</div>-->
        <!--<div class="layui-card-body layui-text">-->
          <!--<div class="layadmin-text" id="s_content">-->

          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
<!--</script>-->

<script>
    layui.use(['admin', 'laytpl', 'element', 'table', 'echarts','attachment'], function () {
        var $ = layui.$
            , admin = layui.admin
            , laytpl = layui.laytpl
            , table = layui.table
            , element = layui.element
            , setter = layui.setter
            ,attachment = layui.attachment
            ,global_obj = {}
            ,form = layui.form
            ,global_obj_temp = {}
            , echarts = layui.echarts
            ,monitorType=0
            ,featureList = []//要素数组对象
            ,baseurl = setter.remoteServiceAddress + "/market/cominfoenvironmentalmanage"
            ,baseurl4 = setter.remoteServiceAddress + "/penalty/administrativepenaltyinfo/typestatic"
            ,baseurl1 = setter.remoteServiceAddress + "/map";



        function createCenterMap() {
          if($("#centerMapContent")){
              $("#centerMapContent").html("");
          }
          var div_whole = $("<div>").css({'width':'100%','height':'600px'});
          $("#centerMapContent").append(div_whole);
          var div_wrapper = $("<div>").addClass("wrapper").css({'top':'0px'});
          div_whole.append(div_wrapper);
          var div_simpleMap = $("<div>").addClass("newmap").attr("id","simpleMap").css({'height':'600px'});
          div_wrapper.append(div_simpleMap);
          TDTMap.init(0,admin,setter,$,setter);
        }

        createCenterMap();

        $("#centerMapTop .layui-col-md2 label").on("click",function () {
            createCenterMap();
            $("#centerMapTop .layui-col-md2 div").addClass("topNewBorder");
            $("#centerMapTop .layui-col-md2 label").addClass("font_white");
            $(this).prev().removeClass("topNewBorder");
            $(this).removeClass("font_white");
            var differType=$(this).attr("data-name");
//            if(differType==0){
//                TDTMap.addPointsInMap(admin,setter,$,result.data,featureList,0);
//            }
            if(differType==1){
                monitorType = 0;
                global_obj_temp = {};
                global_obj_temp.wasteType = 1;
                global_obj_temp.differType = 1;
                TDTMap.map_level = 0;
                TDTMap.maptype = 1;
                TDTMap.zoom_temp = 11;
                centerMapTpl(admin,setter,$,baseurl1,featureList,null,null,global_obj_temp);
                TDTMap.monitorType = monitorType;
                TDTMap.wasteType = global_obj_temp.wasteType;
            }
            if(differType==2){
                monitorType = 1;
                global_obj_temp = {};
                global_obj_temp.wasteType = 2;
                global_obj_temp.differType = 1;
                TDTMap.map_level = 0;
                TDTMap.maptype = 1;
                TDTMap.zoom_temp = 11;
                centerMapTpl(admin,setter,$,baseurl1,featureList,null,null,global_obj_temp);
                TDTMap.monitorType = monitorType;
                TDTMap.wasteType = global_obj_temp.wasteType;
            }
            if(differType==3){
                monitorType = 2;
                global_obj_temp = {};
                global_obj_temp.wasteType = 4;
                global_obj_temp.differType = 1;
                TDTMap.map_level = 0;
                TDTMap.maptype = 1;
                TDTMap.zoom_temp = 11;
                centerMapTpl(admin,setter,$,baseurl1,featureList,null,null,global_obj_temp);
                TDTMap.monitorType = monitorType;
                TDTMap.wasteType = global_obj_temp.wasteType;
            }
        });

        $("#centerMapTop .layui-col-md2:first label").trigger("click");

        function centerMapTpl(admin,setter,$,baseurl,featureList,regulatoryLevel,companyName,global_obj) {
            var index = layer.load(0);
            admin.req({//
                url: baseurl + "/queryCominfoList"
                ,data:{
                    regulatoryLevel:global_obj.regulatoryLevel
                    ,companyName:companyName
                    ,wasteType:global_obj.wasteType
                    ,creditEvaluation:global_obj.creditEvaluation
                    ,otherCondition:global_obj.otherCondition

                }
                , done: function (result) {
                    layer.close(index);
                    TDTMap.addPointsInMap(admin,setter,$,result.data,featureList,0);
                }
                ,complete:function (res) {
                    layer.close(index);
                }
            });
        }

        $("#secondTitle div label").on("click",function () {
            var index = layer.load(0);
            $("#secondTitle div label").removeClass("second_new_label");
            $("#secondTitle div label").addClass("second_old_label");
            $(this).addClass("second_new_label");
            var differType=$(this).attr("data-name");
            if(differType==0){
                secondMapFirstTpl(index);
            }
            if(differType==1){
                secondMapSecondTpl(index);
            }
            if(differType==2){
                secondMapThirdTpl(index);
            }
            if(differType==3){
                secondMapFourTpl(index);
            }
        });

        $("#secondTitle div label:eq(0)").trigger("click");

        function secondMapFirstTpl(index) {
          admin.req({//企业分布
              url: baseurl+ "/industryStatic"
              , done: function (result) {
                  layer.close(index);
                  end =  new Date().getTime() ;
                  secondMapFirst(result);

              }
              ,complete:function (res) {
                  layer.close(index);
              }
          });
        }

        function secondMapSecondTpl(index) {
            admin.req({ //污染源类别
                url: baseurl+"/sourceCategoryStatic"
                , done: function (result) {
                    if(result.code == 0){
                        layer.close(index);
                        var data=result.data;
                        secondMapSecond(data)
                    }
                }
                ,complete:function (res) {
                    layer.close(index);
                }
            });
        }

        function secondMapThirdTpl(index) {
            admin.req({ //企业规模
                url: baseurl+ "/enterpriSecaleStatic"
                , done: function (result) {
                    if(result.code == 0){
                        layer.close(index);
                        var data=result.data;
                        secondMapThird(data);
                    }
                }
                ,complete:function (res) {
                    layer.close(index);
                }
            });
        }

        function secondMapFourTpl(index) {

            admin.req({ //风险等级
                url: baseurl+"/riskLevelStatic"
                , done: function (result) {
                    if(result.code == 0){
                        layer.close(index);
                        var data=result.data;
                        secondMapFour(data);
                    }
                }
                ,complete:function (res) {
                    layer.close(index);
                }
            });
        }

        function secondMapFirst(result){

            function sortId(a,b){
                return b.y-a.y;
            }
            result.data1.sort(sortId);
            for(var i=0;i<result.data2.length;i++){
                result.data2[i].data.sort(sortId);
            }
            Highcharts.chart('secondMap', {
                chart: {
                    type: 'pie',
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    text: ''
                },
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                legend: {
                    enabled: false
                },
                yAxis: {
                    title: {
                        text: '数量（个）'
                    }
                },
                tooltip: {
                    valueSuffix: '家'
                },
                 plotOptions: {
                     pie: {
                         dataLabels: {
                             enabled: true,
                             style:{ "color": "white", "cursor": "default", "fontSize": "12px"}
                         }
//                         allowPointSelect: true,
//                         cursor: 'pointer',
//                         dataLabels: {
//                             enabled: true,
//                             // 通过 format 或 formatter 来格式化数据标签显示
//                             //format: '值: {point.y} 占比 {point.percentage} %',
//                             formatter: function() {
//                                 //this 为当前的点（扇区）对象，可以通过  console.log(this) 来查看详细信息
//                                 return '<span style="color: ' + this.point.color + '"> 值：' + this.y + '家</span>';
//                             }
//                         },
//                         showInLegend: true  // 显示在图例中
                     },
                     series: {
                         dataLabels: {
                             enabled: true,
                             style:{ "color": "white", "cursor": "default", "fontSize": "12px"}
                         }
                     }
                 },
                colors: ['#98D87D', '#FFD86E', '#F3857B', '#29CCCC', '#8996E6', '#49A9EE','#7cb5ec', '#434348', '#90ed7d', '#f7a35c', '#8085e9', '#f15c80', '#e4d354', '#8085e8', '#8d4653', '#91e8e1'],
                series: [
                    {
                        name: '企业数量',
                        type: 'pie',
                        colorByPoint: true,
                        data:result.data1
                    }
                ]
                ,
                drilldown: {
                    series:result.data2,
                    activeDataLabelStyle: {
                        color:"white",
                        fontSize:"12px"
                    }
                }
            });
        }

        function secondMapSecond(data) {

            Highcharts.chart('secondMap', {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie',
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    text: ''
                },
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            style:{ "color": "white", "cursor": "default", "fontSize": "12px" ,"font-family": "Microsoft YaHei"}
                        }
                    }
                },
                colors: ['#98D87D', '#FFD86E', '#F3857B', '#29CCCC', '#8996E6', '#49A9EE', '#e4d354', '#8085e8', '#8d4653', '#91e8e1'],
                series: [{
                    name: '所占比例',
                    colorByPoint: true,
                    data:data

                }]
            });
        }
        function secondMapThird(data){
            var static_data_x = [],
                static_data_y = [];
            if(data!=""){
                for(var i=0;i<data.length;i++){

                    static_data_x[i] = data[i].enterpriSecale  ;
                    static_data_y[i] = data[i].enterpriCount ;
                }
            }

            var chart = Highcharts.chart('secondMap',{
                chart: {
                    type: 'column'
                    ,backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    text: ''
                },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                subtitle: {
                    text: ''
                },
                exporting:{
                    enabled:false
                },
                xAxis: {
                    categories: static_data_x,
                    crosshair: true
                    ,labels:{
                        style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px" }
                    }
                },
                yAxis: {
                    min: 0,
                    lineWidth : 1,
                    title: {
                        text: '数量(家)'
                        ,style:{
                          color:"#05D1E7"
                        }
                    },
                    labels:{
                        style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px" }
                    }
                },
                tooltip: {
                    // head + 每个 point + footer 拼接成完整的 table
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.0f}家 </b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        borderWidth: 0
                    }
                },
                colors: ['#49A9EE'],
                series: [{
                    name: '企业数量',
                    data: static_data_y
                }]
            });
        }

        function secondMapFour(data){
            var static_data_x = [],
                static_data_y = [];
            if(!data==""){
                for(var i=0;i<data.length;i++){
                    static_data_x[i] = data[i].riskLevel  ;
                    static_data_y[i] = data[i].riskCount ;
                }
            }
            var chart = Highcharts.chart('secondMap', {
                chart: {
                    type: 'bar',
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    text: ''
                },
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                subtitle: {
                    text: ''
                },
                xAxis: {
                    categories: static_data_x,
                    title: {
                        text: "等级"
                        ,style:{
                            color:"#05D1E7"
                        }
                    }
                    ,labels:{
                        style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px" }
                    }
                },
                yAxis: {
                    title: {
                        text: "数量（个）"
                        ,style:{
                            color:"#05D1E7"
                        }
                    },
                    allowDecimals:false,
                    lineWidth : 1
                    ,labels:{
                        style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px" }
                    }
                },
                legend: {
                    enabled: false
                },
                tooltip: {
                    valueSuffix: '家'
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true,
                            allowOverlap: true // 允许数据标签重叠
                        }
                    }
                },

                colors: ['#49A9EE'],
                series: [{
                    name: '企业数量',
                    data: static_data_y
                }]
            });
        }

        var chart = Highcharts.chart('curYearAirTotalCount',{
            credits: {
                enabled: false
            },
            chart: {
                type: 'column',
                backgroundColor: {
                    linearGradient: [0, 0, 500, 500],
                    stops: [
                        [0, '#11264F']
                    ]
                }
            },
            colors: ['#66FF33', '#FFCC66', '#FF7318', '#FF0C0C',
                '#66002F', '#666666', '#2b908f', '#f45b5b', '#91e8e1']
            ,
            exporting:{
                enabled:false
            },
            title: {
                text: ''
            },
            legend:{
                enabled:false
            },
            xAxis: {
                type:"category",
                labels:{
                    style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px"}
                }
            },
            yAxis: {
                min: 1,
                lineWidth : 1,
                title: {
                    text: ''
                },
                labels:{
                    style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px"}
                }
            },
            tooltip: {
                // head + 每个 point + footer 拼接成完整的 table
                headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y}</b></td></tr>',
                footerFormat: '</table>',
                shared: true,
                useHTML: true
            },
            plotOptions: {
                column: {
                    borderWidth: 0
                }
            },
            series: [{
                name: '空气质量',
                colorByPoint: true,
                data: [{
                    name: '优',
                    y: 50
                }, {
                    name: '良',
                    y: 105
                }, {
                    name: '轻度污染',
                    y: 95
                }, {
                    name: '中度污染',
                    y: 35
                }, {
                    name: '重度污染',
                    y: 10
                }, {
                    name: '严重污染',
                    y: 5
                }]
            }]
        });

        $("#rightTitle div label").on("click",function () {
            var index = layer.load(0);
            $("#rightTitle div label").removeClass("right_new_label");
            $("#rightTitle div label").addClass("right_old_label");
            $(this).addClass("right_new_label");
            var differType=$(this).attr("data-name");
            var date=new Date();
            if(differType==0){
                mobileEnforceTheLawTpl(null,null,index);
            }
            if(differType==1){
                var year=date.getFullYear();
                mobileEnforceTheLawTpl(year,null,index);
            }
            if(differType==2){
                var month=date.getMonth()+1;
                mobileEnforceTheLawTpl(null,month,index);
            }
        });

        $("#rightTitle div label:eq(0)").trigger("click");

        function mobileEnforceTheLawTpl(year,month,index) {
            layer.close(index);
            Highcharts.chart('mobile_enforce_the_law',{
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                legend: {
                    align: 'right',
                    symbolHeight: 16,
                    symbolWidth: 16,
                    symbolRadius: 2,
                    verticalAlign: 'middle',
                    x: 70,
                    y: 0,
                    width:180,
                    labelFormat: '<span style="color:#fff">{name}: {y}次</span>'
                },
                chart: {
                    spacing : [0, 0 , 0, 0],
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    floating:true,
                    text: ''
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                colors: ['#98D87D','#49A9EE', '#FFD86E', '#F3857B', '#29CCCC', '#8996E6', '#49A9EE', '#e4d354', '#8085e8', '#8d4653', '#91e8e1'],
                plotOptions: {
                    pie: {
                        showInLegend:true,
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            style: {
                                color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || '#fff'
                            }
                        },
                    }
                },
                series: [{
                    type: 'pie',
                    name:'占比',
                    innerSize: '80%',
                    data: [
                        ['询问笔录',    65],
                        ['现场检查',     35]
                    ]
                }]
            });
        }

        $("#bottomRightTitle div label").on("click",function () {
//            var index = layer.load(0);
            $("#bottomRightTitle div label").removeClass("right_new_label");
            $("#bottomRightTitle div label").addClass("right_old_label");
            $(this).addClass("right_new_label");
            var differType=$(this).attr("data-name");
            var date=new Date();
            if(differType==0){
                var year=date.getFullYear();
            }
            if(differType==1){
                var month=date.getMonth()+1;
            }
        });

        $("#bottomRightTitle div label:eq(0)").trigger("click");

        $("#waterAndAir div label").on("click",function () {
//            var index = layer.load(0);
            $("#waterAndAir div label").removeClass("new_waterAndAir");
            $("#waterAndAir div label").addClass("old_waterAndAir");
            $(this).addClass("new_waterAndAir");
            var differType=$(this).attr("data-name");
            var date=new Date();
            if(differType==0){
                var year=date.getFullYear();
            }
            if(differType==1){
                var month=date.getMonth()+1;
            }
        });

        $("#waterAndAir div label:eq(0)").trigger("click");

        administrativeAndPenaltyData();

        function administrativeAndPenaltyData() {
            var date=new Date();
            var year=date.getFullYear();
            var type='2';
            admin.req({ //违法类型饼状图
                url: baseurl4 + "/" + year+"/"+type
                ,done: function(result){
                    if(result.code == 0){//成功
                        var data = result.data;
                        administrativeAndPenaltyTpl(data);
                    }
                }
            });
        }

        function administrativeAndPenaltyTpl(data){

            Highcharts.chart('administrativeAndPenalty', {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie',
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    text: '本年度处罚案件情况',
                    style:{
                        color:'#F4F4F4'
                    }
                },
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                lang: {
                    noData: "没有数据哦!"
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            style:{ "color": "white", "cursor": "default"}
                        }
                    }
                },
                colors: ['#98D87D', '#FFD86E', '#F3857B', '#29CCCC', '#8996E6', '#49A9EE', '#e4d354', '#8085e8', '#8d4653', '#91e8e1'],
                series: [{
                    name: '所占比',
                    colorByPoint: true,
                    data: data //typeStatic
                }]
            });
        }

        $("#vocCheckDate div label").on("click",function () {
//            var index = layer.load(0);
            $("#vocCheckDate div label").removeClass("right_new_label");
            $("#vocCheckDate div label").addClass("right_old_label");
            $(this).addClass("right_new_label");
            var differType=$(this).attr("data-name");
            var date=new Date();
            if(differType==0){
                var year=date.getFullYear();
                vocCheckFirstTpl();
            }
            if(differType==1){
                var month=date.getMonth()+1;
                vocCheckFirstTpl();
            }
        });

        $("#vocCheckDate div label:eq(0)").trigger("click");

        function vocCheckFirstTpl() {
            var chart = Highcharts.chart('vocCheckFirst', {
                chart: {
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                title: {
                    text: '捡漏总进度',
                    align: 'center',
                    verticalAlign: 'middle',
                    y: 50
                    ,style:{
                        color:"#05D1E7",
                        fontSize:"14px"
                    }
                },
                tooltip: {
                    headerFormat: '{series.name}<br>',
                    pointFormat: '{point.name}: <b>{point.percentage:.1f}%</b>'
                },
                credits: {
                    enabled: false
                },
                exporting:{
                    enabled:false
                },
                plotOptions: {
                    pie: {
                        colorByPoint:true,
                        dataLabels: {
                            enabled: true,
                            distance: -50,
                            style: {
                                fontWeight: 'bold',
                                color: 'white',
                                textShadow: '0px 1px 2px black'
                            }
                        },
                        startAngle: -135, // 圆环的开始角度
                        endAngle: 135,    // 圆环的结束角度
                        center: ['50%', '28%']
                    }
                },
                colors: ['#48A8ED','#F4F4F4' ] ,
                series: [{
                    type: 'pie',
                    name: 'voc捡漏',
                    innerSize: '85%',
                    data: [
                        ['',75],
                        ['',25],
                        {
                            name: '其他',
                            y: 0.0,
                            dataLabels: {
                                // 数据比较少，没有空间显示数据标签，所以将其关闭
                                enabled: false
                            }
                        }
                    ]
                }]
            });

            var chart = Highcharts.chart('vocCheckSecond',{
                credits: {
                    enabled: false
                },
                chart: {
                    type: 'column',
                    backgroundColor: {
                        linearGradient: [0, 0, 500, 500],
                        stops: [
                            [0, '#11264F']
                        ]
                    }
                },
                colors: ['#66FF33', '#FFCC66', '#FF7318', '#FF0C0C',
                    '#66002F', '#666666', '#2b908f', '#f45b5b', '#91e8e1']
                ,
                exporting:{
                    enabled:false
                },
                title: {
                    text: '年度消减量对比'
                    ,style:{
                        color:"#05D1E7",
                        fontSize:"14px"
                    }
                    ,verticalAlign:"bottom"
                },
                legend:{
                    enabled:false
                },
                xAxis: {
                    type:"category",
                    labels:{
                        style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px" }
                    }
                },
                yAxis: {
                    min: 1,
                    lineWidth : 1,
                    title: {
                        text: ''
                    },
                    labels:{
                        style:{ "color": "#05D1E7", "cursor": "default", "fontSize": "12px" }
                    }
                },
                tooltip: {
                    // head + 每个 point + footer 拼接成完整的 table
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        borderWidth: 0
                    }
                },
                series: [{
                    name: '已完成捡漏',
                    colorByPoint: true,
                    data: [{
                        name: '2017年',
                        y: 50
                    }, {
                        name: '2018年',
                        y: 105
                    }]
                }]
            });
        }
    });
</script>

