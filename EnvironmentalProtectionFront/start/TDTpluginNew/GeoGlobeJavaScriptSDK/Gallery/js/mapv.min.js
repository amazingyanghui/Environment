!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mapv=e():t.mapv=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=21)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){a.default.bind(this)(),this._options=e||{},this._data=[],t&&this.add(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=("function"==typeof Symbol&&Symbol.iterator,n(24)),a=i(o),s=n(9),u=i(s);r.prototype=a.default.prototype,r.prototype.add=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++){if(t[n].time&&14==t[n].time.length&&"20"==t[n].time.substr(0,2)){var r=t[n].time;t[n].time=new Date(r.substr(0,4)+"-"+r.substr(4,2)+"-"+r.substr(6,2)+" "+r.substr(8,2)+":"+r.substr(10,2)+":"+r.substr(12,2)).getTime()}this._data.push(t[n])}else{if(!(t instanceof Object))throw new Error("Unknown dataType");this._data.push(t)}},r.prototype.get=function(t){t=t||{};var e=(new Date,this._data);new Date;if(t.filter){for(var n=[],i=0;i<e.length;i++)t.filter(e[i])&&n.push(e[i]);e=n}return t.transferCoordinate&&(e=this.transferCoordinate(e,t.transferCoordinate,t.fromColumn,t.toColumn)),e},r.prototype.set=function(t){this._set(t),this._trigger("change")},r.prototype._set=function(t){this.clear(),this.add(t)},r.prototype.clear=function(t){this._data=[]},r.prototype.remove=function(t){},r.prototype.update=function(t,e){for(var n=this._data,i=0;i<n.length;i++)if(e){var r=!0;for(var o in e)n[i][o]!=e[o]&&(r=!1);r&&t&&t(n[i])}else t&&t(n[i]);this._trigger("change")},r.prototype.transferCoordinate=function(t,e,n,i){function r(t){for(var n=[],i=0;i<t.length;i++){for(var r=t[i],o=[],a=0;a<r.length;a++)o.push(e(r[a]));n.push(o)}return n}i=i||"_coordinates",n=n||"coordinates";for(var o=0;o<t.length;o++){var a=t[o].geometry,s=a[n];switch(a.type){case"Point":a[i]=e(s);break;case"LineString":for(var u=[],l=0;l<s.length;l++)u.push(e(s[l]));a[i]=u;break;case"Polygon":var u=r(s);a[i]=u;break;case"MultiPolygon":for(var u=[],c=0;c<s.length;c++){var f=s[c],f=r(f);u.push(f)}a[i]=u}}return t},r.prototype.initGeometry=function(t){t?this._data.forEach(function(e){e.geometry=t(e)}):this._data.forEach(function(t){if(!t.geometry)if(t.lng&&t.lat)t.geometry={type:"Point",coordinates:[t.lng,t.lat]};else if(t.city){var e=u.default.getCenterByCityName(t.city);e&&(t.geometry={type:"Point",coordinates:[e.lng,e.lat]})}})},r.prototype.getMax=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),i=1;i<e.length;i++){var r=parseFloat(e[i][t]);r>n&&(n=r)}return n}},r.prototype.getSum=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=0,i=0;i<e.length;i++)e[i][t]&&(n+=parseFloat(e[i][t]));return n}},r.prototype.getMin=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),i=1;i<e.length;i++){var r=parseFloat(e[i][t]);r<n&&(n=r)}return n}},r.prototype.getUnique=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n={},i=1;i<e.length;i++)n[e[i][t]]=!0;var e=[];for(var r in n)e.push(r);return e}},e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=n(25);e.default={drawDataSet:function(t,e,n){for(var i=e instanceof r.default?e.get():e,o=0,a=i.length;o<a;o++){var s=i[o];this.draw(t,s,n)}},draw:function(t,e,n){var i=e.geometry.type,r=e.geometry._coordinates||e.geometry.coordinates,a=n.symbol||"circle";switch(i){case"Point":var s=e._size||e.size||n._size||n.size||5;"circle"===a?("Point"===n.bigData&&t.moveTo(r[0],r[1]),t.arc(r[0],r[1],s,0,2*Math.PI)):"rect"===a?t.rect(r[0]-s/2,r[1]-s/2,s,s):"honeycomb"===a&&(0,o.draw)(t,r[0],r[1],s);break;case"LineString":for(var u=0;u<r.length;u++){var l=r[u][0],c=r[u][1];0==u?t.moveTo(l,c):t.lineTo(l,c)}break;case"Polygon":this.drawPolygon(t,r);break;case"MultiPolygon":for(var f=0;f<r.length;f++){var g=r[f];this.drawPolygon(t,g)}t.closePath();break;default:console.log("type"+i+"is not support now!")}},drawPolygon:function(t,e){for(var n=0;n<e.length;n++){var i=e[n];t.moveTo(i[0][0],i[0][1]);for(var r=1;r<i.length;r++)t.lineTo(i[r][0],i[r][1]);t.lineTo(i[0][0],i[0][1])}}}},function(t,e,n){"use strict";function i(t){t=t||{},this.gradient=t.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=t.maxSize||35,this.minSize=t.minSize||0,this.max=t.max||100,this.min=t.min||0,this.initPalette()}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=function(t){return t&&t.__esModule?t:{default:t}}(r);i.prototype.setMax=function(t){this.max=t||100},i.prototype.setMin=function(t){this.min=t||0},i.prototype.setMaxSize=function(t){this.maxSize=t||35},i.prototype.setMinSize=function(t){this.minSize=t||0},i.prototype.initPalette=function(){var t=this.gradient,e=new o.default(256,1),n=this.paletteCtx=e.getContext("2d"),i=n.createLinearGradient(0,0,256,1);for(var r in t)i.addColorStop(parseFloat(r),t[r]);n.fillStyle=i,n.fillRect(0,0,256,1)},i.prototype.getColor=function(t){var e=this.getImageData(t);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]/256+")"},i.prototype.getImageData=function(t){var e=this.paletteCtx.getImageData(0,0,256,1).data;if(void 0===t)return e;var n=this.max,i=this.min;t>n&&(t=n),t<i&&(t=i);var r=4*Math.floor((t-i)/(n-i)*255);return[e[r],e[r+1],e[r+2],e[r+3]]},i.prototype.getSize=function(t){var e=this.max,n=this.min,i=this.maxSize,r=this.minSize;return t>e&&(t=e),t<n&&(t=n),r+(t-n)/(e-n)*(i-r)},i.prototype.getLegend=function(t){var e=this.gradient,n=t.width||20,i=t.height||180,r=new o.default(n,i),a=r.getContext("2d"),s=a.createLinearGradient(0,i,0,0);for(var u in e)s.addColorStop(parseFloat(u),e[u]);return a.fillStyle=s,a.fillRect(0,0,n,i),r},e.default=i},function(t,e,n){"use strict";function i(t,e,n){var i=t.createShader(n);return t.shaderSource(i,e),t.compileShader(i),i}function r(t,e,n){var r=i(t,e,t.VERTEX_SHADER),o=i(t,n,t.FRAGMENT_SHADER),a=t.createProgram();return t.attachShader(a,r),t.attachShader(a,o),t.linkProgram(a),t.useProgram(a),a}function o(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=1,e.height=1,n.fillStyle=t,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}Object.defineProperty(e,"__esModule",{value:!0}),e.createShader=i,e.initShaders=r,e.getColorData=o},function(t,e,n){"use strict";function i(t){this.options=t||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=t.map,this._lastDrawTime=null,this.show()}Object.defineProperty(e,"__esModule",{value:!0});var r="undefined"==typeof window?{}:window;r.BMap&&(i.prototype=new BMap.Overlay,i.prototype.initialize=function(t){this._map=t;var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,this.adjustSize(),t.getPanes()[this.paneName].appendChild(e);var n=this;return t.addEventListener("resize",function(){n.adjustSize(),n._draw()}),this.canvas},i.prototype.adjustSize=function(){var t=this._map.getSize(),e=this.canvas,n=this.devicePixelRatio=r.devicePixelRatio||1;e.width=t.width*n,e.height=t.height*n,"2d"==this.context&&e.getContext(this.context).scale(n,n),e.style.width=t.width+"px",e.style.height=t.height+"px"},i.prototype.draw=function(){var t=this;clearTimeout(t.timeoutID),t.timeoutID=setTimeout(function(){t._draw()},15)},i.prototype._draw=function(){var t=this._map,e=t.getSize(),n=t.getCenter();if(n){var i=t.pointToOverlayPixel(n);this.canvas.style.left=i.x-e.width/2+"px",this.canvas.style.top=i.y-e.height/2+"px",this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},i.prototype.getContainer=function(){return this.canvas},i.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},i.prototype.hide=function(){this.canvas.style.display="none"},i.prototype.setZIndex=function(t){this.canvas.style.zIndex=t},i.prototype.getZIndex=function(){return this.zIndex}),e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){requestAnimationFrame(o),c.default.update(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=i(s),l=n(7),c=i(l),f=n(3),g=i(f),h=n(18),d=i(h),p=n(19),v=i(p),y=n(10),m=i(y),x=n(8),b=i(x),w=n(14),_=i(w),M=n(12),P=i(M),S=n(13),O=i(S),C=n(33),k=i(C),E=n(34),L=i(E),T=n(2),j=i(T),A=n(1),z=i(A);"undefined"!=typeof window&&requestAnimationFrame(o);var R=function(){function t(e,n,i){r(this,t),n instanceof u.default||(n=new u.default(n)),this.dataSet=n,this.map=e}return a(t,[{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(t){var e=this;if(e.intensity=new g.default({maxSize:e.options.maxSize,minSize:e.options.minSize,gradient:e.options.gradient,max:e.options.max||this.dataSet.getMax("count")}),e.category=new d.default(e.options.splitList),e.choropleth=new v.default(e.options.splitList),void 0===e.options.splitList&&e.category.generateByDataSet(this.dataSet,e.options.color),void 0===e.options.splitList){var n=e.options.min||this.dataSet.getMin("count"),i=e.options.max||this.dataSet.getMax("count");e.choropleth.generateByMinMax(n,i)}}},{key:"getLegend",value:function(t){var e=(this.options.draw,this);return"intensity"==e.options.draw||"heatmap"==e.options.draw?this.intensity.getLegend(t):"category"==e.options.draw?this.category.getLegend(t):void 0}},{key:"processData",value:function(t){var e=this,n=e.options.draw;if("bubble"==n||"intensity"==n||"category"==n||"choropleth"==n||"simple"==n)for(var i=0;i<t.length;i++){var r=t[i];"bubble"==e.options.draw?t[i]._size=e.intensity.getSize(r.count):t[i]._size=void 0;var o="_fillStyle";"LineString"!==t[i].geometry.type&&"stroke"!==e.options.styleType||(o="_strokeStyle"),"intensity"==e.options.draw?t[i][o]=e.intensity.getColor(r.count):"category"==e.options.draw?t[i][o]=e.category.get(r.count):"choropleth"==e.options.draw&&(t[i][o]=e.choropleth.get(r.count))}}},{key:"isEnabledTime",value:function(){var t=this.options.animation;return t&&!(!1===t.enabled)}},{key:"argCheck",value:function(t){"heatmap"==t.draw&&t.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"drawContext",value:function(t,e,n,i){var r=this;switch(r.options.draw){case"heatmap":m.default.draw(t,e,r.options);break;case"grid":case"honeycomb":r.options.offset={x:i.x,y:i.y},"grid"==r.options.draw?P.default.draw(t,e,r.options):O.default.draw(t,e,r.options);break;case"text":k.default.draw(t,e,r.options);break;case"icon":L.default.draw(t,e,r.options);break;case"clip":t.save(),t.fillStyle=r.options.fillStyle||"rgba(0, 0, 0, 0.5)",t.fillRect(0,0,t.canvas.width,t.canvas.height),b.default.draw(t,e,r.options),t.beginPath(),j.default.drawDataSet(t,e,r.options),t.clip(),(0,z.default)(t),t.restore();break;default:"webgl"==r.options.context?_.default.draw(r.canvasLayer.canvas.getContext("webgl"),e,r.options):b.default.draw(t,e,r.options)}}},{key:"isPointInPath",value:function(t,e){for(var t=this.canvasLayer.canvas.getContext(this.context),n=this.dataSet.get(),i=0;i<n.length;i++){t.beginPath(),j.default.draw(t,n[i],this.options);var r=e.x*this.canvasLayer.devicePixelRatio,o=e.y*this.canvasLayer.devicePixelRatio;if(t.isPointInPath(r,o)||t.isPointInStroke(r,o))return n[i]}}},{key:"clickEvent",value:function(t,e){var n=this.isPointInPath(this.getContext(),t);n?this.options.methods.click(n,e):this.options.methods.click(null,e)}},{key:"mousemoveEvent",value:function(t,e){var n=this.isPointInPath(this.getContext(),t);n?this.options.methods.mousemove(n,e):this.options.methods.mousemove(null,e)}},{key:"update",value:function(t,e){var n=this,i=t.options,r=n.options;for(var o in i)r[o]=i[o];n.init(r),!1!==e&&n.draw()}},{key:"setOptions",value:function(t){var e=this;e.init(t),e.draw()}},{key:"set",value:function(t){var e=this,n=this.getContext(),i=this.getDefaultContextConfig();for(var r in i)n[r]=i[r];e.init(t.options),e.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var t=this,e=t.options.animation;if("time"==t.options.draw||t.isEnabledTime()){e.stepsRange||(e.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:e.stepsRange.start},t.animator=new c.default.Tween(this.steps).onUpdate(function(){t._canvasUpdate(this.step)}).repeat(1/0),this.addAnimatorEvent();var n=1e3*e.duration||5e3;t.animator.to({step:e.stepsRange.end},n),t.animator.start()}else t.animator&&t.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),t}();e.default=R},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=n||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e,i){if(0===t.length)return!1;var r=0;for(e=void 0!==e?e:n.now();r<t.length;)t[r].update(e)||i?r++:t.splice(r,1);return!0}}}();"undefined"==typeof window&&void 0!==t?n.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?n.now=window.performance.now.bind(window.performance):void 0!==Date.now?n.now=Date.now:n.now=function(){return(new Date).getTime()},n.Tween=function(t){var e,i=t,r={},o={},a={},s=1e3,u=0,l=!1,c=!1,f=!1,g=0,h=null,d=n.Easing.Linear.None,p=n.Interpolation.Linear,v=[],y=null,m=!1,x=null,b=null,w=null;this.to=function(t,e){return o=t,void 0!==e&&(s=e),this},this.start=function(t){n.add(this),c=!0,m=!1,h=void 0!==t?t:n.now(),h+=g;for(var e in o){if(o[e]instanceof Array){if(0===o[e].length)continue;o[e]=[i[e]].concat(o[e])}void 0!==i[e]&&(r[e]=i[e],r[e]instanceof Array==!1&&(r[e]*=1),a[e]=r[e]||0)}return this},this.stop=function(){return c?(n.remove(this),c=!1,null!==w&&w.call(i,i),this.stopChainedTweens(),this):this},this.end=function(){return this.update(h+s),this},this.stopChainedTweens=function(){for(var t=0,e=v.length;t<e;t++)v[t].stop()},this.delay=function(t){return g=t,this},this.repeat=function(t){return u=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return l=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return p=t,this},this.chain=function(){return v=arguments,this},this.onStart=function(t){return y=t,this},this.onUpdate=function(t){return x=t,this},this.onComplete=function(t){return b=t,this},this.onStop=function(t){return w=t,this},this.update=function(t){var n,c,w;if(t<h)return!0;!1===m&&(null!==y&&y.call(i,i),m=!0),c=(t-h)/s,c=c>1?1:c,w=d(c);for(n in o)if(void 0!==r[n]){var _=r[n]||0,M=o[n];M instanceof Array?i[n]=p(M,w):("string"==typeof M&&(M="+"===M.charAt(0)||"-"===M.charAt(0)?_+parseFloat(M):parseFloat(M)),"number"==typeof M&&(i[n]=_+(M-_)*w))}if(null!==x&&x.call(i,w),1===c){if(u>0){isFinite(u)&&u--;for(n in a){if("string"==typeof o[n]&&(a[n]=a[n]+parseFloat(o[n])),l){var P=a[n];a[n]=o[n],o[n]=P}r[n]=a[n]}return l&&(f=!f),h=void 0!==e?t+e:t+g,!0}null!==b&&b.call(i,i);for(var S=0,O=v.length;S<O;S++)v[S].start(h+s);return!1}return!0}},n.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*n.Easing.Bounce.In(2*t):.5*n.Easing.Bounce.Out(2*t-1)+.5}}},n.Interpolation={Linear:function(t,e){var i=t.length-1,r=i*e,o=Math.floor(r),a=n.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],r):e>1?a(t[i],t[i-1],i-r):a(t[o],t[o+1>i?i:o+1],r-o)},Bezier:function(t,e){for(var i=0,r=t.length-1,o=Math.pow,a=n.Interpolation.Utils.Bernstein,s=0;s<=r;s++)i+=o(1-e,r-s)*o(e,s)*t[s]*a(r,s);return i},CatmullRom:function(t,e){var i=t.length-1,r=i*e,o=Math.floor(r),a=n.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(o=Math.floor(r=i*(1+e))),a(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],r-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[i]-(a(t[i],t[i],t[i-1],t[i-1],r-i)-t[i]):a(t[o?o-1:0],t[o],t[i<o+1?i:o+1],t[i<o+2?i:o+2],r-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var i=n.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r;return(2*e-2*n+o+a)*(r*s)+(-3*e+3*n-2*o-a)*s+o*r+e}}},e.default=n}).call(e,n(32))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(0),s=i(a);e.default={draw:function(t,e,n){var i=e instanceof s.default?e.get():e;t.save();for(var r in n)t[r]=n[r];if(n.bigData){t.save(),t.beginPath();for(var a=0,u=i.length;a<u;a++){var l=i[a];o.default.draw(t,l,n)}var c=n.bigData;"Point"==c||"Polygon"==c||"MultiPolygon"==c?(t.fill(),(l.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"==c&&t.stroke(),t.restore()}else for(var a=0,u=i.length;a<u;a++){var l=i[a];t.save(),(l.fillStyle||l._fillStyle)&&(t.fillStyle=l.fillStyle||l._fillStyle),(l.strokeStyle||l._strokeStyle)&&(t.strokeStyle=l.strokeStyle||l._strokeStyle);var c=l.geometry.type;t.beginPath(),o.default.draw(t,l,n),"Point"==c||"Polygon"==c||"MultiPolygon"==c?(t.fill(),(l.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"==c&&((l.lineWidth||l._lineWidth)&&(t.lineWidth=l.lineWidth||l._lineWidth),t.stroke()),t.restore()}t.restore()}}},function(t,e,n){"use strict";function i(t){var e=t.split("|");return e[0]=e[0].split(","),{lng:parseFloat(e[0][0]),lat:parseFloat(e[0][1])}}Object.defineProperty(e,"__esModule",{value:!0});var r={municipalities:[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],provinces:[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],other:[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}]};e.default={getProvinceNameByCityName:function(t){for(var e=r.provinces,n=0;n<e.length;n++)for(var i=e[n].n,o=e[n].cities,a=0;a<o.length;a++)if(o[a].n==t)return i;return null},getCenterByCityName:function(t){t=t.replace("市","");for(var e=0;e<r.municipalities.length;e++)if(r.municipalities[e].n==t)return i(r.municipalities[e].g);for(var e=0;e<r.other.length;e++)if(r.other[e].n==t)return i(r.other[e].g);for(var n=r.provinces,e=0;e<n.length;e++){if(n[e].n==t)return i(n[e].g);for(var o=n[e].cities,a=0;a<o.length;a++)if(o[a].n==t)return i(o[a].g)}return null}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t/2,n=t+e,i=new h.default(2*n,2*n),r=i.getContext("2d");return r.shadowBlur=e,r.shadowColor="black",r.shadowOffsetX=r.shadowOffsetY=1e4,r.beginPath(),r.arc(n-1e4,n-1e4,t,0,2*Math.PI,!0),r.closePath(),r.fill(),i}function o(t,e,n){for(var i,r=n.maxOpacity||.8,o=3,a=t.length;o<a;o+=4)i=4*t[o],t[o]/256>r&&(t[o]=256*r),t[o-3]=e[i],t[o-2]=e[i+1],t[o-1]=e[i+2]}function a(t,e,n){var i=n.max||100,o=n.min||0,a=n._size;void 0==a&&void 0==(a=n.size)&&(a=13);var s=new l.default({gradient:n.gradient,max:i,min:o}),u=r(a),c=u.width/2,g=u.height/2,h=e,d={};h.forEach(function(t,e){var n=void 0===t.count?1:t.count,r=Math.min(1,n/i).toFixed(2);d[r]=d[r]||[],d[r].push(t)});for(var p in d)if(!isNaN(p)){var v=d[p];t.beginPath(),n.withoutAlpha||(t.globalAlpha=p),t.strokeStyle=s.getColor(p*i),v.forEach(function(e,r){if(e.geometry){var o=e.geometry._coordinates||e.geometry.coordinates,a=e.geometry.type;if("Point"===a){var s=void 0===e.count?1:e.count;t.globalAlpha=s/i,t.drawImage(u,o[0]-c,o[1]-g)}else if("LineString"===a){var s=void 0===e.count?1:e.count;t.globalAlpha=s/i,t.beginPath(),f.default.draw(t,e,n),t.stroke()}}})}}function s(t,e,n){if(!(t.canvas.width<=0||t.canvas.height<=0)){var i=n.strength||.3;t.strokeStyle="rgba(0,0,0,"+i+")";var r=new h.default(t.canvas.width,t.canvas.height),s=r.getContext("2d");s.scale(v.devicePixelRatio,v.devicePixelRatio),n=n||{};var u=e instanceof p.default?e.get():e;t.save();var c=new l.default({gradient:n.gradient});if(a(s,u,n),!n.absolute){var f=s.getImageData(0,0,t.canvas.width,t.canvas.height);o(f.data,c.getImageData(),n),t.putImageData(f,0,0),t.restore()}c=null,r=null}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),l=i(u),c=n(2),f=i(c),g=n(11),h=i(g),d=n(0),p=i(d),v=n(26);e.default={draw:s}},function(t,e,n){"use strict";function i(t,e){var n;if("undefined"==typeof document);else{var n=document.createElement("canvas");t&&(n.width=t),e&&(n.height=e)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(0),s=i(a);e.default={draw:function(t,e,n){t.save();for(var i=e instanceof s.default?e.get():e,r={},a=n._size||n.size||50,u=n.offset||{x:0,y:0},l=0;l<i.length;l++){var c=i[l].geometry._coordinates||i[l].geometry.coordinates,f=Math.floor((c[0]-u.x)/a)+","+Math.floor((c[1]-u.y)/a);r[f]||(r[f]=0),r[f]+=~~(i[l].count||1)}var g=new o.default({max:n.max||100,gradient:n.gradient});for(var f in r)f=f.split(","),t.beginPath(),t.rect(f[0]*a+.5+u.x,f[1]*a+.5+u.y,a,a),t.fillStyle=g.getColor(r[f]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke();if(n.label&&!1!==n.label.show){t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur);for(var f in r){f=f.split(",");var h=r[f],d=t.measureText(h).width;t.fillText(h,f[0]*a+.5+u.x+a/2-d/2,f[1]*a+.5+u.y+a/2+5)}}t.restore()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=60*n+30,r=Math.PI/180*i;return[t.x+e*Math.cos(r),t.y+e*Math.sin(r)]}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=i(o),s=n(0),u=i(s);e.default={draw:function(t,e,n){t.save();var i=e instanceof u.default?e.get():e;for(var o in n)t[o]=n[o];var s=n.offset||{x:10,y:10},l=n._size||n.size||40;l=l/2/Math.sin(Math.PI/3);for(var c=2*l*Math.sin(Math.PI/3),f=1.5*l,g={},h=0;h<i.length;h++){var d=i[h].geometry._coordinates||i[h].geometry.coordinates,p=(d[1]-s.y)/f,v=Math.round(p),y=(d[0]-s.x)/c-(1&v?.5:0),m=Math.round(y),x=p-v;if(3*Math.abs(x)>1){var b=y-m,w=m+(y<m?-1:1)/2,_=v+(p<v?-1:1),M=y-w,P=p-_;b*b+x*x>M*M+P*P&&(m=w+(1&v?1:-1)/2,v=_)}var S=m+"-"+v,O=g[S];O?O.push(i[h]):(O=g[S]=[i[h]],O.i=m,O.j=v,O.x=(m+(1&v?.5:0))*c,O.y=v*f)}var C=new a.default({max:n.max||100,maxSize:l,gradient:n.gradient});for(var o in g){var k=g[o];t.beginPath();for(var E=0;E<6;E++){var L=r({x:k.x+s.x,y:k.y+s.y},l,E);t.lineTo(L[0],L[1])}t.closePath();for(var T=0,h=0;h<k.length;h++)T+=k[h].count||1;k.count=T,t.fillStyle=C.getColor(T),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show){t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur);for(var o in g){var k=g[o],j=k.count;j=j<0?j.toFixed(2):~~j;var A=t.measureText(j).width;t.fillText(j,k.x+s.x-A/2,k.y+s.y+5)}}t.restore()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=i(r),a=n(15),s=i(a),u=n(16),l=i(u),c=n(17),f=i(c);e.default={draw:function(t,e,n){var i=e instanceof o.default?e.get():e;i.length>0&&("LineString"==i[0].geometry.type?s.default.draw(t,i,n):"Polygon"==i[0].geometry.type||"MultiPolygon"==i[0].geometry.type?f.default.draw(t,i,n):l.default.draw(t,i,n))}}},function(t,e,n){"use strict";function i(t,e,n){if(e){var i=(0,r.initShaders)(t,o,a);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),t.clear(t.COLOR_BUFFER_BIT);var s=t.canvas.width/2,u=t.canvas.height/2,l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l);var c=t.getAttribLocation(i,"a_Position");t.vertexAttribPointer(c,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(c);var f=t.getUniformLocation(i,"u_FragColor"),g=(0,r.getColorData)(n.strokeStyle||"red");t.uniform4f(f,g[0]/255,g[1]/255,g[2]/255,g[3]/255),t.lineWidth(n.lineWidth||1);for(var h=0,d=e.length;h<d;h++){for(var p=e[h].geometry._coordinates,v=[],y=0;y<p.length;y++){var m=p[y],x=(m[0]-s)/s,b=(u-m[1])/u;v.push(x,b)}var w=new Float32Array(v);t.bufferData(t.ARRAY_BUFFER,w,t.STATIC_DRAW),t.drawArrays(t.LINE_STRIP,0,p.length)}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),a=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");e.default={draw:i}},function(t,e,n){"use strict";function i(t,e,n){if(e){var i=(0,r.initShaders)(t,o,a),s=t.getAttribLocation(i,"a_Position"),u=t.getAttribLocation(i,"a_PointSize"),l=t.getUniformLocation(i,"u_FragColor");t.clear(t.COLOR_BUFFER_BIT);for(var c=t.canvas.width/2,f=t.canvas.height/2,g=[],h=0,d=0;d<e.length;d++){var p=e[d].geometry._coordinates,v=(p[0]-c)/c,y=(f-p[1])/f;v<-1||v>1||y<-1||y>1||(g.push(v,y),h++)}var m=new Float32Array(g),x=h,b=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,m,t.STATIC_DRAW),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.vertexAttrib1f(u,n._size);var w=(0,r.getColorData)(n.fillStyle||"red");t.uniform4f(l,w[0]/255,w[1]/255,w[2]/255,w[3]/255),t.drawArrays(t.POINTS,0,x)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),a=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");e.default={draw:i}},function(t,e,n){"use strict";function i(t,e,n){if(e){t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,t.canvas.width,t.canvas.height);var i=(0,r.initShaders)(t,s,u);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE);var o=t.canvas.width/2,l=t.canvas.height/2;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer());var c=t.getAttribLocation(i,"a_Position");t.vertexAttribPointer(c,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(c);var f=t.getUniformLocation(i,"u_FragColor"),g=(0,r.getColorData)(n.fillStyle||"red");t.uniform4f(f,g[0]/255,g[1]/255,g[2]/255,g[3]/255),t.lineWidth(n.lineWidth||1);for(var h=[],d=[],p=0,v=0,y=e.length;v<y;v++){var m=a.default.flatten(e[v].geometry._coordinates||e[v].geometry.coordinates),x=m.vertices;p=h.length/2;for(var b=0;b<x.length;b+=2)x[b]=(x[b]-o)/o,x[b+1]=(l-x[b+1])/l;(h.length+x.length)/2>65536&&(t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,d.length,t.UNSIGNED_SHORT,0),h.length=0,d.length=0,p=0);for(var b=0;b<x.length;b++)h.push(x[b]);for(var w=(0,a.default)(x,m.holes,m.dimensions),b=0;b<w.length;b++)d.push(w[b]+p)}t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,d.length,t.UNSIGNED_SHORT,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(27),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),u=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join("");e.default={draw:i}},function(t,e,n){"use strict";function i(t){this.splitList=t||{other:1}}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.get=function(t){var e=this.splitList,n=e.other;for(var i in e)if(t==i){n=e[i];break}return n},i.prototype.generateByDataSet=function(t,e){var n=e||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],i=t.get();this.splitList={};for(var r=0,o=0;o<i.length&&(void 0===this.splitList[i[o].count]&&(this.splitList[i[o].count]=n[r],r++),!(r>=n.length-1));o++);this.splitList.other=n[n.length-1]},i.prototype.getLegend=function(t){var e=this.splitList,n=document.createElement("div");n.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var i="";for(var r in e)i+='<div style="line-height: 19px;" value="'+r+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+e[r]+';"></span><span style="margin-left: 3px;">'+r+"<span></div>";return n.innerHTML=i,n},e.default=i},function(t,e,n){"use strict";function i(t){this.splitList=t||[{start:0,value:"red"}]}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.get=function(t){for(var e=this.splitList,n=!1,i=0;i<e.length;i++)if((void 0===e[i].start||void 0!==e[i].start&&t>=e[i].start)&&(void 0===e[i].end||void 0!==e[i].end&&t<e[i].end)){n=e[i].value;break}return n},i.prototype.generateByDataSet=function(t){var e=t.getMin("count"),n=t.getMax("count");this.generateByMinMax(e,n)},i.prototype.generateByMinMax=function(t,e){var n=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],i=(e-t)/7,r=t;this.splitList=[];for(var o=0;r<e;)this.splitList.push({start:r,end:r+i,value:n[o]}),o++,r+=i},i.prototype.getLegend=function(t){this.splitList},e.default=i},function(t,e,n){"use strict";function i(t){this.options=t||{},this.map=this.options.map,this.context=this.options.context||"2d",this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var r="undefined"==typeof window?{}:window;i.prototype.initialize=function(){this.canvas=document.createElement("canvas"),this.canvasContext=this.canvas.getContext(this.context),this.canvas.style.position="absolute",this.canvas.style.zIndex=this.zIndex,this.resize(),this.options.container?this.options.container.appendChild(this.canvas):this.map.getCanvasContainer().appendChild(this.canvas),this.bindEvent()},i.prototype.bindEvent=function(){this.map.on("dragstart",this.dragStart.bind(this)),this.map.on("move",this.redraw.bind(this)),this.map.on("moveend",this.dragEnd.bind(this)),this.map.on("resize",this.resize.bind(this))},i.prototype.resize=function(){var t=this.devicePixelRatio=r.devicePixelRatio||1;this.canvas.width=this.map.getCanvas().width*t,this.canvas.height=this.map.getCanvas().height*t,"2d"==this.context?this.canvasContext.scale(t,t):this.canvasContext.viewport(0,0,this.canvas.width,this.canvas.height),this.canvas.style.width=this.map.getCanvas().width+"px",this.canvas.style.height=this.map.getCanvas().height+"px"},i.prototype.draw=function(){this.options.animationEnabled&&!1!==this.options.dragdrawing||this.options.update&&this.options.update.call(this)},i.prototype.redraw=function(){cancelAnimationFrame(this.currentAnimationFrame),this.currentAnimationFrame=requestAnimationFrame(this.draw.bind(this))},i.prototype.show=function(){this.canvas.style.display="block"},i.prototype.hide=function(){this.canvas.style.display="none"},i.prototype.dragStart=function(){0===this.map.getPitch()&&(this.flatdragging=!0,this.lastCenter=this.map.getCenter())},i.prototype.dragEnd=function(){this.canvas.style.left="",this.canvas.style.top="",this.flatdragging=!1,this.draw()},e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(22);Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var o=n(1);Object.defineProperty(e,"canvasClear",{enumerable:!0,get:function(){return i(o).default}});var a=n(23);Object.defineProperty(e,"canvasResolutionScale",{enumerable:!0,get:function(){return i(a).default}});var s=n(8);Object.defineProperty(e,"canvasDrawSimple",{enumerable:!0,get:function(){return i(s).default}});var u=n(10);Object.defineProperty(e,"canvasDrawHeatmap",{enumerable:!0,get:function(){return i(u).default}});var l=n(12);Object.defineProperty(e,"canvasDrawGrid",{enumerable:!0,get:function(){return i(l).default}});var c=n(13);Object.defineProperty(e,"canvasDrawHoneycomb",{enumerable:!0,get:function(){return i(c).default}});var f=n(14);Object.defineProperty(e,"webglDrawSimple",{enumerable:!0,get:function(){return i(f).default}});var g=n(16);Object.defineProperty(e,"webglDrawPoint",{enumerable:!0,get:function(){return i(g).default}});var h=n(15);Object.defineProperty(e,"webglDrawLine",{enumerable:!0,get:function(){return i(h).default}});var d=n(17);Object.defineProperty(e,"webglDrawPolygon",{enumerable:!0,get:function(){return i(d).default}});var p=n(9);Object.defineProperty(e,"utilCityCenter",{enumerable:!0,get:function(){return i(p).default}});var v=n(28);Object.defineProperty(e,"utilCurve",{enumerable:!0,get:function(){return i(v).default}});var y=n(29);Object.defineProperty(e,"utilForceEdgeBundling",{enumerable:!0,get:function(){return i(y).default}});var m=n(3);Object.defineProperty(e,"utilDataRangeIntensity",{enumerable:!0,get:function(){return i(m).default}});var x=n(18);Object.defineProperty(e,"utilDataRangeCategory",{enumerable:!0,get:function(){return i(x).default}});var b=n(19);Object.defineProperty(e,"utilDataRangeChoropleth",{enumerable:!0,get:function(){return i(b).default}});var w=n(30);Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return i(w).default}});var _=n(5);Object.defineProperty(e,"baiduMapCanvasLayer",{enumerable:!0,get:function(){return i(_).default}});var M=n(31);Object.defineProperty(e,"baiduMapAnimationLayer",{enumerable:!0,get:function(){return i(M).default}});var P=n(35);Object.defineProperty(e,"baiduMapLayer",{enumerable:!0,get:function(){return i(P).default}});var S=n(20);Object.defineProperty(e,"mapboxGLMapCanvasLayer",{enumerable:!0,get:function(){return i(S).default}});var O=n(36);Object.defineProperty(e,"mapboxGLMapLayer",{enumerable:!0,get:function(){return i(O).default}});var C=n(0);Object.defineProperty(e,"DataSet",{enumerable:!0,get:function(){return i(C).default}});var k=n(37);Object.defineProperty(e,"geojson",{enumerable:!0,get:function(){return i(k).default}});var E=n(38);Object.defineProperty(e,"csv",{enumerable:!0,get:function(){return i(E).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.version="2.0.17"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=window.devicePixelRatio||1;t.canvas.width=t.canvas.width*e,t.canvas.height=t.canvas.height*e,t.canvas.style.width=t.canvas.width/e+"px",t.canvas.style.height=t.canvas.height/e+"px",t.scale(e,e)}},function(t,e,n){"use strict";function i(){this._subscribers={}}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.on=function(t,e){var n=this._subscribers[t];n||(n=[],this._subscribers[t]=n),n.push({callback:e})},i.prototype.off=function(t,e){var n=this._subscribers[t];if(n)for(var i=0;i<n.length;i++)n[i].callback==e&&(n.splice(i,1),i--)},i.prototype._trigger=function(t,e,n){if("*"==t)throw new Error("Cannot trigger event *");var i=[];t in this._subscribers&&(i=i.concat(this._subscribers[t])),"*"in this._subscribers&&(i=i.concat(this._subscribers["*"]));for(var r=0,o=i.length;r<o;r++){var a=i[r];a.callback&&a.callback(t,e,n||null)}},e.default=i},function(t,e,n){"use strict";function i(t,e,n){var i=60*n+30,r=Math.PI/180*i;return[t.x+e*Math.cos(r),t.y+e*Math.sin(r)]}function r(t,e,n,r){for(var o=0;o<6;o++){var a=i({x:e,y:n},r,o);t.lineTo(a[0],a[1])}}Object.defineProperty(e,"__esModule",{value:!0}),e.draw=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="undefined"==typeof window?{}:window,r=i.devicePixelRatio||1;e.devicePixelRatio=r,e.window=i,e.default=i},function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i=e&&e.length,o=i?e[0]*n:t.length,s=r(t,0,o,n,!0),u=[];if(!s)return u;var l,c,g,h,d,p,v;if(i&&(s=f(t,e,s,n)),t.length>80*n){l=g=t[0],c=h=t[1];for(var y=n;y<o;y+=n)d=t[y],p=t[y+1],d<l&&(l=d),p<c&&(c=p),d>g&&(g=d),p>h&&(h=p);v=Math.max(g-l,h-c)}return a(s,u,n,l,c,v),u}function r(t,e,n,i,r){var o,a;if(r===T(t,e,n,i)>0)for(o=e;o<n;o+=i)a=k(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=k(o,t[o],t[o+1],a);return a&&_(a,a.next)&&(E(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==w(i.prev,i,i.next))i=i.next;else{if(E(i),(i=e=i.prev)===i.next)return null;n=!0}}while(n||i!==e);return e}function a(t,e,n,i,r,f,g){if(t){!g&&f&&p(t,i,r,f);for(var h,d,v=t;t.prev!==t.next;)if(h=t.prev,d=t.next,f?u(t,i,r,f):s(t))e.push(h.i/n),e.push(t.i/n),e.push(d.i/n),E(t),t=d.next,v=d.next;else if((t=d)===v){g?1===g?(t=l(t,e,n),a(t,e,n,i,r,f,2)):2===g&&c(t,e,n,i,r,f):a(o(t),e,n,i,r,f,1);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(w(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(x(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&w(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,a=t.next;if(w(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,u=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,e,n,i),g=y(l,c,e,n,i),h=t.nextZ;h&&h.z<=g;){if(h!==t.prev&&h!==t.next&&x(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&x(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!_(r,o)&&M(r,i,i.next,o)&&S(r,o)&&S(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),E(i),E(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,n,i,r,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=C(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,i,r,s),void a(c,e,n,i,r,s)}l=l.next}u=u.next}while(u!==t)}function f(t,e,n,i){var a,s,u,l,c,f=[];for(a=0,s=e.length;a<s;a++)u=e[a]*i,l=a<s-1?e[a+1]*i:t.length,c=r(t,u,l,i,!1),c===c.next&&(c.steiner=!0),f.push(m(c));for(f.sort(g),a=0;a<f.length;a++)h(f[a],n),n=o(n,n.next);return n}function g(t,e){return t.x-e.x}function h(t,e){if(e=d(t,e)){var n=C(e,t);o(n,n.next)}}function d(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var u,l=n,c=n.x,f=n.y,g=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&x(o<f?r:a,o,c,f,o<f?a:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<g||u===g&&i.x>n.x)&&S(i,t)&&(n=i,g=u),i=i.next;return n}function p(t,e,n,i){var r=t;do{null===r.z&&(r.z=y(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,v(r)}function v(t){var e,n,i,r,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(u=l;s>0||u>0&&i;)0===s?(r=i,i=i.nextZ,u--):0!==u&&i?n.z<=i.z?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--):(r=n,n=n.nextZ,s--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1);return t}function y(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function x(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!P(t,e)&&S(t,e)&&S(e,t)&&O(t,e)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,i){return!!(_(t,e)&&_(n,i)||_(t,i)&&_(n,e))||w(t,e,n)>0!=w(t,e,i)>0&&w(n,i,t)>0!=w(n,i,e)>0}function P(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function S(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function O(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function C(t,e){var n=new L(t.i,t.x,t.y),i=new L(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function k(t,e,n,i){var r=new L(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function L(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}Object.defineProperty(e,"__esModule",{value:!0}),i.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(T(t,0,o,n));if(r)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(T(t,l,c,n))}var f=0;for(s=0;s<i.length;s+=3){var g=i[s]*n,h=i[s+1]*n,d=i[s+2]*n;f+=Math.abs((t[g]-t[d])*(t[h+1]-t[g+1])-(t[g]-t[h])*(t[d+1]-t[g+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},e.default=i},function(t,e,n){"use strict";function i(t,e){e=e||{};for(var n=[],i=0;i<t.length-1;i++){var o=r(t[i],t[i+1],e.count);o&&o.length>0&&(n=n.concat(o))}return n}function r(t,e,n){if(!t||!e)return null;var i,r,o,a,s,u,l=function(t){return 1-2*t+t*t},c=function(t){return 2*t-2*t*t},f=function(t){return t*t},g=[],n=n||40,h=0,d=0;if(void 0===e)return void(void 0!==g&&(g=[]));var p=parseFloat(t.lat),v=parseFloat(e.lat),y=parseFloat(t.lng),m=parseFloat(e.lng);for(m>y&&parseFloat(m-y)>180&&y<0&&(y=parseFloat(360+y)),y>m&&parseFloat(y-m)>180&&m<0&&(m=parseFloat(360+m)),0,u=0,v==p?(i=0,r=y-m):m==y?(i=Math.PI/2,r=p-v):(i=Math.atan((v-p)/(m-y)),r=(v-p)/Math.sin(i)),0==u&&(u=i+Math.PI/5),o=r/2,s=o*Math.cos(u)+y,a=o*Math.sin(u)+p,h=0;h<n+1;h++)g.push([y*l(d)+s*c(d)+m*f(d),p*l(d)+a*c(d)+v*f(d)]),d+=1/n;return g}Object.defineProperty(e,"__esModule",{value:!0});var o={getPoints:i};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){return t.x*e.x+t.y*e.y}function e(t){return{x:M[t.target].x-M[t.source].x,y:M[t.target].y-M[t.source].y}}function n(t){return Math.sqrt(Math.pow(M[t.source].x-M[t.target].x,2)+Math.pow(M[t.source].y-M[t.target].y,2))}function i(t){return Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2))}function r(t){return{x:(M[t.source].x+M[t.target].x)/2,y:(M[t.source].y+M[t.target].y)/2}}function o(t){for(var e=0,n=1;n<C[t].length;n++){e+=a(C[t][n],C[t][n-1])}return e}function a(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),i=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+i*(e.target.x-e.source.x),y:e.source.y+i*(e.target.y-e.source.y)}}function u(){for(var t=0;t<S.length;t++)1==L?C[t]=[]:(C[t]=[],C[t].push(M[S[t].source]),C[t].push(M[S[t].target]))}function l(){for(var t=0;t<S.length;t++)O[t]=[]}function c(t){for(var e=[],n=0;n<t.length;n++)M[t[n].source].x!=M[t[n].target].x&&M[t[n].source].y!=M[t[n].target].y&&e.push(t[n]);return e}function f(t,e,n){var i=C[t][e-1],r=C[t][e+1],o=C[t][e],a=i.x-o.x+r.x-o.x,s=i.y-o.y+r.y-o.y;return a*=n,s*=n,{x:a,y:s}}function g(t,e,n){for(var r={x:0,y:0},o=O[t],a=0;a<o.length;a++){var s={x:C[o[a]][e].x-C[t][e].x,y:C[o[a]][e].y-C[t][e].y};if(Math.abs(s.x)>I||Math.abs(s.y)>I){var u=1/Math.pow(i({source:C[o[a]][e],target:C[t][e]}),1);r.x+=s.x*u,r.y+=s.y*u}}return r}function h(t,e,i){for(var r=k/(n(S[t])*(e+1)),o=[{x:0,y:0}],a=1;a<e+1;a++){var s={x:0,y:0},u=f(t,a,r),l=g(t,a,i);s.x=i*(u.x+l.x),s.y=i*(u.y+l.y),o.push(s)}return o.push({x:0,y:0}),o}function d(t){for(var e=0;e<S.length;e++)if(1==t)C[e].push(M[S[e].source]),C[e].push(r(S[e])),C[e].push(M[S[e].target]);else{var n=o(e),i=n/(t+1),s=i,u=[];u.push(M[S[e].source]);for(var l=1;l<C[e].length;l++){for(var c=a(C[e][l],C[e][l-1]);c>s;){var f=s/c,g=C[e][l-1].x,h=C[e][l-1].y;g+=f*(C[e][l].x-C[e][l-1].x),h+=f*(C[e][l].y-C[e][l-1].y),u.push({x:g,y:h}),c-=s,s=i}s-=c}u.push(M[S[e].target]),C[e]=u}}function p(i,r){return Math.abs(t(e(i),e(r))/(n(i)*n(r)))}function v(t,e){var i=(n(t)+n(e))/2;return 2/(i/Math.min(n(t),n(e))+Math.max(n(t),n(e))/i)}function y(t,e){var i=(n(t)+n(e))/2;return i/(i+a({x:(M[t.source].x+M[t.target].x)/2,y:(M[t.source].y+M[t.target].y)/2},{x:(M[e.source].x+M[e.target].x)/2,y:(M[e.source].y+M[e.target].y)/2}))}function m(t,e){var n=s(M[e.source],{source:M[t.source],target:M[t.target]}),i=s(M[e.target],{source:M[t.source],target:M[t.target]}),r={x:(n.x+i.x)/2,y:(n.y+i.y)/2},o={x:(M[t.source].x+M[t.target].x)/2,y:(M[t.source].y+M[t.target].y)/2};return Math.max(0,1-2*a(o,r)/a(n,i))}function x(t,e){return Math.min(m(t,e),m(e,t))}function b(t,e){return p(t,e)*v(t,e)*y(t,e)*x(t,e)}function w(t,e){return b(t,e)>=R}function _(){for(var t=0;t<S.length-1;t++)for(var e=t+1;e<S.length;e++)t!=e&&w(S[t],S[e])&&(O[t].push(e),O[e].push(t))}var M={},S=[],O=[],C=[],k=.1,E=.1,L=1,T=2,j=6,A=70,z=.6666667,R=.6,I=1e-8,F=function(){var t=E,e=A,n=L;u(),l(),d(n),_();for(var i=0;i<j;i++){for(var r=0;r<e;r++){for(var o=[],a=0;a<S.length;a++)o[a]=h(a,n,t);for(var s=0;s<S.length;s++)for(var c=0;c<n+1;c++)C[s][c].x+=o[s][c].x,C[s][c].y+=o[s][c].y}t/=2,n*=2,e*=z,d(n)}return C};return F.nodes=function(t){return 0==arguments.length?M:(M=t,F)},F.edges=function(t){return 0==arguments.length?S:(S=c(t),F)},F.bundling_stiffness=function(t){return 0==arguments.length?k:(k=t,F)},F.step_size=function(t){return 0==arguments.length?E:(E=t,F)},F.cycles=function(t){return 0==arguments.length?j:(j=t,F)},F.iterations=function(t){return 0==arguments.length?A:(A=t,F)},F.iterations_rate=function(t){return 0==arguments.length?z:(z=t,F)},F.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,F)},F.subdivision_rate=function(t){return 0==arguments.length?T:(T=t,F)},F.compatbility_threshold=function(t){return 0==arguments.length?compatbility_threshold:(R=t,F)},F};e.default=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n,r){if(i(this,t),!e||!n)return console.warn("id 和 type 为必填项"),!1;if("baidu"==n){if(!BMap)return console.warn("请先引入百度地图JS API"),!1}else console.warn("暂不支持你的地图类型");this.type=n;var o=r&&r.center?r.center:[106.962497,38.208726],a=r&&r.zoom?r.zoom:5,s=this.map=new BMap.Map(e,{enableMapClick:!1});s.centerAndZoom(new BMap.Point(o[0],o[1]),a),s.enableScrollWheelZoom(!0),s.setMapStyle({style:"light"})}return r(t,[{key:"addLayer",value:function(t,e){if("baidu"==this.type)return new mapv.baiduMapLayer(this.map,dataSet,e)}},{key:"getMap",value:function(){return this.map}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),l=i(u),c=n(6),f=i(c),g=n(5),h=i(g),d=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));a.map=t,a.options=i||{},a.dataSet=n;var s=new h.default({map:t,zIndex:a.options.zIndex,update:a._canvasUpdate.bind(a)});a.init(a.options),a.canvasLayer=s,a.transferToMercator();var u=a;return n.on("change",function(){u.transferToMercator(),s.draw()}),a.ctx=s.canvas.getContext("2d"),a.start(),a}return a(e,t),s(e,[{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var t=this.map.getMapType().getProjection();if("bd09mc"!==this.options.coordType){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(e)}}},{key:"_canvasUpdate",value:function(){var t=this.ctx;if(t){var e=this.map,n=Math.pow(2,18-e.getZoom()),i=e.getMapType().getProjection(),r=i.lngLatToPoint(e.getCenter()),o=new BMap.Pixel(r.x-e.getSize().width/2*n,r.y+e.getSize().height/2*n);(0,l.default)(t);var a={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){if(t){return[(t[0]-o.x)/n,(o.y-t[1])/n]}}};this.data=this.dataSet.get(a),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var t=this.ctx,e=this.data;if(e){t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),this.options.shadowColor&&(t.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(t.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(t.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(t.globalCompositeOperation=this.options.globalCompositeOperation);for(var n=this.options,i=0;i<e.length;i++)if("Point"===e[i].geometry.type){t.beginPath();var r=e[i].size||this.options.size,o=e[i].minSize||this.options.minSize||0;void 0===e[i]._size&&(e[i]._size=o),t.arc(e[i].geometry._coordinates[0],e[i].geometry._coordinates[1],e[i]._size,0,2*Math.PI,!0),t.closePath(),e[i]._size++,e[i]._size>r&&(e[i]._size=o),t.lineWidth=1,t.strokeStyle=e[i].strokeStyle||e[i]._strokeStyle||n.strokeStyle||"yellow",t.stroke();var a=e[i].fillStyle||e[i]._fillStyle||n.fillStyle;a&&(t.fillStyle=a,t.fill())}else if("LineString"===e[i].geometry.type){t.beginPath();var s=e[i].size||this.options.size||5,o=e[i].minSize||this.options.minSize||0;void 0===e[i]._index&&(e[i]._index=0);var u=e[i]._index;t.arc(e[i].geometry._coordinates[u][0],e[i].geometry._coordinates[u][1],s,0,2*Math.PI,!0),t.closePath(),e[i]._index++,e[i]._index>=e[i].geometry._coordinates.length&&(e[i]._index=0),t.lineWidth=n.lineWidth||1;var l=e[i].strokeStyle||n.strokeStyle,a=e[i].fillStyle||n.fillStyle||"yellow";t.fillStyle=a,t.fill(),l&&(t.strokeStyle=l,t.stroke())}t.restore()}}},{key:"animate",value:function(){this.drawAnimation();var t=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),t)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}}]),e}(f.default);e.default=d},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){p&&h&&(p=!1,h.length?d=h.concat(d):v=-1,d.length&&s())}function s(){if(!p){var t=r(a);p=!0;for(var e=d.length;e;){for(h=d,d=[];++v<e;)h&&h[v].run();v=-1,e=d.length}h=null,p=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,f,g=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,d=[],p=!1,v=-1;g.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||p||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=l,g.addListener=l,g.once=l,g.off=l,g.removeListener=l,g.removeAllListeners=l,g.emit=l,g.prependListener=l,g.prependOnceListener=l,g.listeners=function(t){return[]},g.binding=function(t){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(t){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<t.length;n++)if(o(t[n],e))return!0;return!1}function o(t,e){var n=Math.min(t.ne.x,e.ne.x),i=Math.min(t.sw.y,e.sw.y),r=Math.max(t.sw.x,e.sw.x),o=Math.max(t.ne.y,e.ne.y);return n>r&&i>o}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),s=(i(a),n(0)),u=i(s);e.default={draw:function(t,e,n){var i=e instanceof u.default?e.get():e;t.save();for(var o in n)t[o]=n[o];var a=n.offset||{x:0,y:0},s=[],l=n._size||n.size;l?t.font="bold "+l+"px Arial":l=12;var c=n.textKey||"text";if(n.textAlign||(t.textAlign="center"),n.textBaseline||(t.textBaseline="middle"),n.avoid)for(var f=0,g=i.length;f<g;f++){var h=i[f].geometry._coordinates||i[f].geometry.coordinates,d=h[0]+a.x,p=h[1]+a.y,v=i[f][c],y=t.measureText(v).width,m=d-y/2,x=p-l/2,b={sw:{x:m,y:x+l},ne:{x:m+y,y:x}};r(s,b)||(s.push(b),m+=y/2,x+=l/2,t.fillText(v,m,x))}else for(var f=0,g=i.length;f<g;f++){var h=i[f].geometry._coordinates||i[f].geometry.coordinates,d=h[0]+a.x,p=h[1]+a.y,v=i[f][c];t.fillText(v,d,p)}t.restore()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=(i(r),n(0)),a=i(o);e.default={draw:function(t,e,n){var i=e instanceof a.default?e.get():e;t.fillStyle="white",t.textAlign="center",t.textBaseline="middle";for(var r=n.offset||{x:0,y:0},o=0,s=i.length;o<s;o++)if(i[o].geometry){var u=i[o].deg||n.deg,l=i[o].icon||n.icon,c=i[o].geometry._coordinates||i[o].geometry.coordinates,f=c[0],g=c[1];u&&(t.save(),t.translate(f,g),t.rotate(u*Math.PI/180),t.translate(-f,-g));var h=n._width||n.width||l.width,d=n._height||n.height||l.height;f=f-h/2+r.x,g=g-d/2+r.y,n.sx&&n.sy&&n.swidth&&n.sheight&&n.width&&n.height?t.drawImage(l,n.sx,n.sy,n.swidth,n.sheight,f,g,h,d):n.width&&n.height?t.drawImage(l,f,g,h,d):t.drawImage(l,f,g),u&&t.restore()}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=n(6),c=i(l),f=n(5),g=i(f),h=n(1),d=i(h),p=n(0),v=(i(p),n(7)),y=(i(v),function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i)),s=a;i=i||{},a.clickEvent=a.clickEvent.bind(a),a.mousemoveEvent=a.mousemoveEvent.bind(a),s.init(i),s.argCheck(i),s.transferToMercator();var u=a.canvasLayer=new g.default({map:t,context:a.context,paneName:i.paneName,mixBlendMode:i.mixBlendMode,enableMassClear:i.enableMassClear,zIndex:i.zIndex,update:function(){s._canvasUpdate()}});return n.on("change",function(){s.transferToMercator(),u.draw()}),a}return a(e,t),s(e,[{key:"clickEvent",value:function(t){var n=t.pixel;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){this.unbindEvent();var e=this.map;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addEventListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(){var t=this.map.getMapType().getProjection();if("bd09mc"!==this.options.coordType){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(e)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,i=this.canvasLayer._map,r=Math.pow(2,18-i.getZoom()),o=i.getMapType().getProjection(),a=o.lngLatToPoint(i.getCenter()),s=new BMap.Pixel(a.x-i.getSize().width/2*r,a.y+i.getSize().height/2*r),u=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void(0,d.default)(u);"2d"==this.context&&(u.save(),u.globalCompositeOperation="destination-out",u.fillStyle="rgba(0, 0, 0, .1)",u.fillRect(0,0,u.canvas.width,u.canvas.height),u.restore())}else(0,d.default)(u);if("2d"==this.context)for(var l in e.options)u[l]=e.options[l];else u.clear(u.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&i.getZoom()<e.options.minZoom||e.options.maxZoom&&i.getZoom()>e.options.maxZoom)){var c=1;"2d"!=this.context&&(c=this.canvasLayer.devicePixelRatio);var f={fromColumn:"bd09mc"==e.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){return[(t[0]-s.x)/r*c,(s.y-t[1])/r*c]}};void 0!==t&&(f.filter=function(e){var i=n.trails||10;return!!(t&&e.time>t-i&&e.time<t)});var g=e.dataSet.get(f);this.processData(g);var h=i.pointToPixel(new BMap.Point(0,0));"m"==e.options.unit?(e.options.size&&(e.options._size=e.options.size/r),e.options.width&&(e.options._width=e.options.width/r),e.options.height&&(e.options._height=e.options.height/r)):(e.options._size=e.options.size,e.options._height=e.options.height,e.options._width=e.options.width),this.drawContext(u,g,e.options,h),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator(),this.bindEvent()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),e}(c.default));e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=n(6),c=i(l),f=n(20),g=i(f),h=n(1),d=i(h),p=n(0),v=i(p),y=n(7),m=(i(y),function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i)),s=a;i=i||{},s.init(i),s.argCheck(i);a.canvasLayer=new g.default({map:t,context:a.context,zIndex:i.zIndex,container:i.container,dragdrawing:i.dragdrawing,animationEnabled:a.isEnabledTime(),update:function(){s._canvasUpdate()}});return a.bindEvent(),!a.isEnabledTime()&&a.draw(),a}return a(e,t),s(e,[{key:"clickEvent",value:function(t){var n=t.point;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.point;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){this.unbindEvent();var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent.bind(this)),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent.bind(this)))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,i=this.getContext(),r=this.map;if(e.isEnabledTime())if(void 0===t){if(!e.canvasLayer.flatdragging)return void("2d"===this.context?(0,d.default)(i):i.clear(i.COLOR_BUFFER_BIT))}else"2d"==this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore());else if((!e.canvasLayer.flatdragging||!1!==e.options.dragdrawing)&&("2d"===this.context?(0,d.default)(i):i.clear(i.COLOR_BUFFER_BIT),!1===e.options.dragdrawing&&r.moving))return;if("2d"==this.context)for(var o in e.options)i[o]=e.options[o];else!e.canvasLayer.flatdragging&&i.clear(i.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&r.getZoom()<e.options.minZoom||e.options.maxZoom&&r.getZoom()>e.options.maxZoom)){if("2d"!=this.context&&this.canvasLayer.devicePixelRatio,!1===this.options.dragdrawing&&e.canvasLayer.flatdragging){var a=e.canvasLayer.lastCenter,s=r.project([a.lng,a.lat]),u=s.x-r.getCanvas().width/2,l=s.y-r.getCanvas().height/2;e.canvasLayer.canvas.style.left=u+"px",e.canvasLayer.canvas.style.top=l+"px"}else{var c={transferCoordinate:function(t){var e=r.project([t[0],t[1]]);return[e.x,e.y]}};void 0!==t&&(c.filter=function(e){var i=n.trails||10;return!!(t&&e.time>t-i&&e.time<t)});var f=e.dataSet.get(c);this.processData(f);var g=r.project([0,0]);"m"==e.options.unit&&e.options.size?e.options._size=e.options.size/zoomUnit:e.options._size=e.options.size,this.drawContext(i,new v.default(f),e.options,g)}e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){!1===this.options.dragdrawing&&(this.map.on("movestart",this.animatorMovestartEvent.bind(this)),this.map.on("moveend",this.animatorMoveendEvent.bind(this)))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),e}(c.default));e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={getDataSet:function(t){for(var e=[],n=t.features,i=0;i<n.length;i++){var o=n[i],a=o.geometry,s=o.properties,u={};for(var l in s)u[l]=s[l];u.geometry=a,e.push(u)}return new r.default(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={CSVToArray:function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],r=null;r=n.exec(t);){var o=r[1];o.length&&o!==e&&i.push([]);var a;a=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],i[i.length-1].push(a)}return i},getDataSet:function(t,e){for(var n=this.CSVToArray(t,e||","),i=[],o=n[0],a=1;a<n.length-1;a++){for(var s=n[a],u={},l=0;l<s.length;l++){var c=s[l];"geometry"==o[l]&&(c=JSON.parse(c)),u[o[l]]=c}i.push(u)}return new r.default(i)}}}])});
//# sourceMappingURL=mapv.min.js.map